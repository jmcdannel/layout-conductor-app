{"version":3,"sources":["Throttles/ThrottleSpeed.js","Throttles/JmriThrottleController.js","Shared/Hooks/useDebounce.js","Turnouts/switch.svg","Shared/Images/turnout-straight.svg","Shared/Images/turnout-divergent.svg","Shared/Images/turnout-export.svg","Turnouts/Settings.js","Turnouts/Turnout.js","Shared/Images/TurnoutMasks/4-left.svg","Layout/images/tam/tam-south-lines.svg","Turnouts/MapTurnout.js","Layout/images/tam/tamarack-station-south.png","Turnouts/Turnouts.js","Throttles/ThrottleSlider.js","Throttles/Throttle.js","Throttles/Throttles.js","Effects/Signal.js","Effects/Effect.js","Effects/Effects.js","Throttles/MiniThrottle.js","Throttles/MiniThrottles.js","Shared/Context/MenuContext.js","Conductor/ConductorMenu.js","Conductor/Conductor.js","TrackMaster/TrackMaster.js","TrackMaster/Footer.js","TrackMaster/Power.js","TrackMaster/StatusMonitor.js","TrackMaster/Header.js","Store/Reducer.js","Store/initialState.js","Store/Store.js","TrackMaster/LandingMenu.js","theme.js","App.js","reportWebVitals.js","index.js","Layout/images/IDAWANY-blueline.png","Layout/images/IDAWANY-brownline.png","Layout/images/IDAWANY-greenline.png","Layout/images/IDAWANY-magentaline.png","Layout/images/IDAWANY-orangeline.png","Layout/images/IDAWANY-purpleline.png","Layout/images/IDAWANY-redline.png","Layout/images/IDAWANY-yellowline.png","Api.js","config/config.js","Shared/jmri/jmriApi.js","Shared/Config/navConfig.js"],"names":["ThrottleSpeed","props","speed","isDisabled","className","Math","abs","parseInt","JmriThrottleController","useContext","Context","dispatch","jmriApi","forward","address","handleSpeed","name","console","log","type","payload","handleDirection","a","throttle","useEffect","on","updateThrottle","changeDirection","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","_g","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","excluded","sourceKeys","keys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgTurnoutStraight","_ref","svgRef","title","titleId","viewBox","xmlns","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","ref","id","transform","fill","d","clipPath","stroke","strokeWidth","SvgTurnoutDivergent","getInverse","degrees","Settings","open","config","onClose","turnoutId","setName","line","setLine","straight","setStraight","divergent","setDivergent","isLoading","setIsLoading","isLocked","setIsLocked","isLinked","setIsPristine","setHasError","handleClose","handleServo","sendDegrees","then","resp","catch","err","finally","handleSave","api","turnouts","put","turnout","error","isValidDegrees","current","Dialog","maxWidth","DialogTitle","Divider","DialogContent","Box","mt","mb","DialogContentText","Grid","container","spacing","item","xs","TextField","margin","label","size","disabled","InputProps","startAdornment","InputAdornment","position","onChange","e","fullWidth","IconButton","onClick","width","val","my","ButtonGroup","variant","color","Button","startIcon","DialogActions","defaultLine","Colors","lineId","Turnout","relay","servo","defaultOrientation","isDivergent","setIsDivergent","setError","isPristine","showSettings","setShowSettings","handleToggle","newCurrent","toString","handleReset","Card","Chip","style","backgroundColor","clickable","CardContent","CardActionArea","CardMedia","component","height","CircularProgress","Typography","gutterBottom","CardActions","Snackbar","autoHideDuration","event","reason","undefined","message","Svg4Left","xmlnsXlink","xmlSpace","strokeLinecap","x","y","_rect","_clipPath","_g2","MapTurnout","section","replace","toLowerCase","SvgTamSouthLines","display","Turnouts","view","filter","groupBy","state","lines","reduce","acc","curr","includes","push","sections","sm","map","t","src","tamarackStationSouthImage","defaultProps","initialView","ThrottleSlider","autoStop","max","step","marks","Array","mark","Slider","orientation","defaultValue","min","track","newValue","onChangeCommitted","Throttle","loco","onLocoClick","isAcquired","initialMaxSpeed","isNaN","maxSpeed","initialUiSpeed","uiSpeed","setUiSpeed","setMaxSpeed","minSpeed","setMinSpeed","precisonDialog","setPrecisonDialog","debouncedSpeed","handleCruiceControlClick","cruiseControl","handleParkClick","releaseLoco","handleStickyThrottleClick","newAutoStop","locos","handlePrecisionChange","road","CardHeader","avatar","substring","icon","flexGrow","Paper","elevation","direction","FormControl","sx","padding","InputLabel","Select","labelId","MenuItem","Throttles","flexDirection","MiniThrottles","Signal","effect","effectId","getMetaData","isSmallView","ToggleButtonGroup","exclusive","ToggleButton","opacity","Effect","handleSwitchChange","updateEffect","checked","handleButtonClick","changedEffect","effects","newEffect","actions","borderColor","getLineColor","getSectionColor","getAction","Switch","inputProps","Avatar","fontSize","getAvatar","Effects","sensors","MiniThrottle","handleLocoAcquired","handleLocoClick","requestLoco","res","join","idleByDefault","flexWrap","menuConfig","MenuContext","React","createContext","Conductor","defaultMenu","window","localStorage","getItem","JSON","parse","showMaps","group","lineFilters","sectionFilters","menu","setItem","stringify","justifyContent","alignItems","filtered","TrackMaster","location","useLocation","appConfig","getAppConfig","signals","modules","pathname","page","setMenu","jmriInitialized","setJmriInitialized","sensorsInitialized","setSensorsInitialized","jmriReady","setJmriReady","apiReady","setApiReady","initialize","apiInitState","initJmri","handleJmriReady","bind","setup","jmri","isSetup","watchSensors","handleSensor","isReady","inverted","setSignal","action","actionState","signalId","sensor","find","pin","HIGH","sensorAction","LOW","Provider","handleMenuClick","menuChange","m","alignContent","path","exact","element","module","Footer","onNavigate","to","Link","navConfig","link","powerStates","unknown","off","Power","powerStatus","setPowerStatus","initialized","setInitialized","handlePowerStateChange","power","getState","ready","currState","getCurrentStateKey","Hidden","smDown","StatusMonitor","jmriConfigOpen","setJMRIConfigOpen","apiConfigOpen","setAPIConfigOpen","layoutConfigOpen","setLayoutConfigOpen","jmriHost","setJMRIHost","apiHost","setAPIHost","layoutId","setLayoutId","hasJmri","hasApi","jmriClassName","apiClassName","Tooltip","Autocomplete","freeSolo","options","layoutIds","renderInput","params","updateConfig","reload","apiHosts","jmriHosts","Header","handleSSLAuth","onSSLAuth","anchorEl","navItem","getByLink","AppBar","Toolbar","Menu","keepMounted","Reducer","warn","initialState","layout","userPreferences","Store","children","useReducer","theme","createTheme","typography","useNextVariants","palette","mode","primary","secondary","background","default","App","CssBaseline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","locoDefaults","get","Id","fetch","response","json","Error","layoutConfig","getModules","reqs","Promise","all","req","results","index","data","idField","method","cache","crossDomain","headers","body","args","storageKey","getlocalStorageConfig","require","newConfig","defaultColor","linesConfig","sectionsConfig","sectionId","s","$jmri","$","jQuery","promises","Logger","resolve","reject","acquire","release","onerror","errMsg","errUrl","errLineNumber","closeSocket","onunload","jmriLostComm","throttleAcquisition","fireEvent","throttleRelease","throttleDirection","throttleSpeed","throttleFunctionState","functionNumber","active","speedValueFormated","speedValue","STOP","FULL_SPEED","validateCommand","setJMRI","createPromise","eventHandlers","forEach","obj","rejectMsg","errorMessage","JMRI","toSend","fullData","code","end","jsonVersion","jmriVersion","railroadName","fs","throttleState","light","userName","comment","reporter","report","lastReport","sensorState","signalHead","lit","appearance","held","appearanceName","signalMast","aspect","memory","layoutPowerState","getJMRI","callback","conductor","throttles","result"],"mappings":"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","file":"static/js/main.e8bfac98.chunk.js","sourcesContent":["import React from 'react';\n\nexport const ThrottleSpeed = props => {\n\n  const { speed, isDisabled = false } = props;\n\n  return (\n    <div className={`throttle__speed \n      ${isDisabled ? 'throttle__speed--disabled' : ''}\n      ${speed < 0 \n        ? 'throttle__speed--reverse' \n        : 'throttle__speed--forward'}`}>\n      {Math.abs(parseInt(speed))}\n    </div>\n  );\n\n}\n\nexport default ThrottleSpeed;","import React, { useEffect, useContext } from 'react';\nimport { Context } from '../Store/Store';\n\nexport const JmriThrottleController = props => {\n\n    const [ state, dispatch ] = useContext(Context);\n    const { jmriApi, speed, forward, address } = props;\n    \n    const handleSpeed = ({ name, speed }) => {\n        console.log('handleSpeed', address, name, forward, speed);\n      dispatch({ type: 'UPDATE_LOCO', payload: { address: name, speed } });\n    }\n    \n    const handleDirection = async ({ name, forward }) => {\n        console.log('handleDirection', address, name, forward, speed);\n      dispatch({ type: 'UPDATE_LOCO', payload: { address: name, forward } });\n      if (speed !== 0) {\n        await jmriApi.throttle(address, Math.abs(speed));\n      }\n    }\n\n    useEffect(() => {\n        jmriApi.on('direction', 'JmriThrottleController', handleDirection);\n        jmriApi.on('speed', 'JmriThrottleController', handleSpeed);\n    }, [jmriApi, handleDirection, handleSpeed]);\n\n    useEffect(() => {\n        const updateThrottle = async () => {\n            if (speed > 0 && forward === false) {\n                await jmriApi.changeDirection(address, true);\n            } else if (speed < 0 && forward === true) {\n                await jmriApi.changeDirection(address, false);\n            } else if (speed > 0 && forward === true) {\n                await jmriApi.throttle(address, Math.abs(speed));\n            } else if (speed < 0 && forward === false) {\n                await jmriApi.throttle(address, Math.abs(speed));\n            } else if (speed !== 0 && forward === null) {\n                await jmriApi.changeDirection(address, speed > 0);\n            } else if (speed === 0 && forward !== null) {\n                await jmriApi.throttle(address, Math.abs(speed));\n            }\n        };\n        updateThrottle();\n    }, [jmriApi, speed, address, forward]);\n\n    return (<></>)\n}\n\nexport default JmriThrottleController;\n","import { useState, useEffect } from 'react';\n\nexport function useDebounce(value, delay) {\n    // State and setters for debounced value\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(\n        () => {\n        // Update debounced value after delay\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        // Cancel the timeout if value changes (also on delay change or unmount)\n        // This is how we prevent debounced value from updating if value is changed ...\n        // .. within the delay period. Timeout gets cleared and restarted.\n        return () => {\n            clearTimeout(handler);\n        };\n        },\n        [value, delay] // Only re-call effect if value or delay changes\n    );\n\n    return debouncedValue;\n}\n\nexport default useDebounce;\n","var _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSwitch(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"8 0 28 46\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinecap: \"square\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 1.5\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Switch-2A\",\n    serifid: \"Switch 2A\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Switch\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M34.119,43.607l0,-28.947\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"straight-outer\",\n    d: \"M34.119,1.955l0,10.818\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"straight-inner\",\n    d: \"M26.828,1.958l0,10.818\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M26.828,24.131l0,19.64\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"divergent-inner\",\n    d: \"M26.416,23.186l-16.723,-16.722\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"divergent-outer\",\n    d: \"M25.833,12.419l-10.814,-10.161\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Label\"\n  }, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M26.766,33.785l-3.609,0\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.959,29.305c0,-2.665 2.164,-4.828 4.828,-4.828l9.656,0c2.665,0 4.829,2.163 4.829,4.828l0,9.656c0,2.665 -2.164,4.828 -4.829,4.828l-9.656,0c-2.664,0 -4.828,-2.163 -4.828,-4.828l0,-9.656Z\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 2\n    }\n  })), /*#__PURE__*/React.createElement(\"text\", {\n    x: \"3.619px\",\n    y: \"37.709px\",\n    style: {\n      fontFamily: \"'Arial-BoldMT', 'Arial', sans-serif\",\n      fontWeight: 700,\n      fontSize: 10\n    }\n  }, \"101\"))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSwitch);\nexport default __webpack_public_path__ + \"static/media/switch.91b716ae.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTurnoutStraight(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 833 159\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: 1.5,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(-200 -118)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M199.7 117.5H1032.4V276H199.7z\"\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M199.7 117.5H1032.4V276H199.7z\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#a)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3146.09,549.036\",\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: 384.9,\n    transform: \"matrix(.15687 0 0 .15493 490 64)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L2002.07,822.816C2002.07,822.816 2535.69,804.044 2715.58,780.319C2934.27,751.476 3370.77,651.026 3370.77,651.026\",\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: 199.3,\n    transform: \"matrix(.30272 0 0 .29932 -217 -3)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 199.3,\n    transform: \"matrix(.30272 0 0 .29932 -218 -4)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 385.1,\n    transform: \"matrix(.1567 0 0 .15493 497 115)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 464.1,\n    transform: \"matrix(.13 0 0 .12854 -55 137)\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTurnoutStraight);\nexport default __webpack_public_path__ + \"static/media/turnout-straight.ad7b7bb3.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTurnoutDivergent(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 833 159\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: 1.5,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(-200 -118)\"\n  }, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M199.7 117.5H1032.4V276H199.7z\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#a)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: 199.3,\n    transform: \"matrix(.30272 0 0 .29932 -218 -4)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: 385.1,\n    transform: \"matrix(.1567 0 0 .15493 497 115)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L2002.07,822.816C2002.07,822.816 2535.69,804.044 2715.58,780.319C2934.27,751.476 3370.77,651.026 3370.77,651.026\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 199.3,\n    transform: \"matrix(.30272 0 0 .29932 -217 -3)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 464.1,\n    transform: \"matrix(.13 0 0 .12854 -55 137)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3146.09,549.036\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 384.9,\n    transform: \"matrix(.15687 0 0 .15493 490 64)\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTurnoutDivergent);\nexport default __webpack_public_path__ + \"static/media/turnout-divergent.270f99e6.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTurnoutExport(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 833 159\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: 1.5,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(-200 -118)\"\n  }, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"a\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M199.7 117.5H1032.4V276H199.7z\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#a)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: 199.3,\n    transform: \"matrix(.30272 0 0 .29932 -218 -4)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: 385.1,\n    transform: \"matrix(.1567 0 0 .15493 497 115)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L2002.07,822.816C2002.07,822.816 2535.69,804.044 2715.58,780.319C2934.27,751.476 3370.77,651.026 3370.77,651.026\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 199.3,\n    transform: \"matrix(.30272 0 0 .29932 -217 -3)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3394.61,822.857\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 464.1,\n    transform: \"matrix(.13 0 0 .12854 -55 137)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1993.94,822.857L3146.09,549.036\",\n    fill: \"none\",\n    stroke: \"#ff00fc\",\n    strokeWidth: 384.9,\n    transform: \"matrix(.15687 0 0 .15493 490 64)\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTurnoutExport);\nexport default __webpack_public_path__ + \"static/media/turnout-export.270f99e6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useContext } from 'react';\nimport Button from '@mui/material/Button';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\n// import CallSplit from '@mui/icons-material/CallSplit';\nimport { green } from '@mui/material/colors';\nimport Divider from '@mui/material/Divider';\n// import ErrorIcon from '@mui/icons-material/Error';\nimport IconButton from '@mui/material/IconButton';\n// import DoneIcon from '@mui/icons-material/Done';\nimport RestoreIcon from '@mui/icons-material/Restore';\n// import LinkIcon from '@mui/icons-material/Link';\n// import LinkOffIcon from '@mui/icons-material/LinkOff';\n// import Info from '@mui/icons-material/Info';\nimport Lock from '@mui/icons-material/Lock';\n// import Bookmark from '@mui/icons-material/Bookmark';\nimport LockOpen from '@mui/icons-material/LockOpen';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nimport TextField from '@mui/material/TextField';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nimport { Context } from '../Store/Store';\nimport api from '../Api';\n\n\nconst getInverse = degrees => {\n  return degrees < 90\n    ? 90 + (90 - degrees)\n    : 90 - (degrees - 90);\n}\n\nexport const Settings = props => {\n  const { open, config, onClose } = props;\n\n  const [ state, dispatch ] = useContext(Context);\n\n  const { turnoutId } = config;\n  const [name, setName] = useState(config.name);\n  const [line, setLine] = useState(config.line);\n  const [straight, setStraight] = useState(config.straight);\n  const [divergent, setDivergent] = useState(config.divergent);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLocked, setIsLocked] = useState(true);\n  const [isLinked, setIsLinked] = useState(config.straight === getInverse(config.divergent));\n  const [isPristine, setIsPristine] = useState(true);\n  const [hasError, setHasError] = useState(false);\n\n  const handleClose = () => {\n    console.log(props);\n    onClose();\n  };\n\n  const handleLock = () => setIsLocked(true);\n\n  const handleUnlock = () => setIsLocked(false);\n\n  const handleLink = () => {\n    setIsLinked(true);\n    setDivergent(straight);\n  }\n\n  const handleUnlink = () => setIsLinked(false);\n\n  const handleServo = degrees => {\n    if (isLoading) { \n      return;\n    }\n    setIsLoading(true);\n    setHasError(false);\n    sendDegrees(degrees).then(resp => {\n      console.log('complete', resp);\n      setIsPristine(false);\n    }).catch(err => {\n      console.log(err);\n      setHasError(true);\n    }).finally(() => {\n      setIsLoading(false);\n    });\n  }\n\n  const handleSave = async () => {\n    try {\n      setIsLoading(true);\n      setHasError(false);\n      const turnout = await api.turnouts.put({\n        turnoutId,\n        name,\n        line,\n        straight,\n        divergent\n      });\n      await dispatch({ type: 'UPDATE_TURNOUT', payload: turnout });\n      onClose();\n    } catch (err) {\n      console.error(err);\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  const handleResetServo = () => {\n    setStraight(config.straight);\n    setDivergent(config.divergent);\n  }\n\n  const handleStraightChange = e => {\n    const val = parseInt(e.target.value);\n    if (isValidDegrees(val)) {\n      setStraight(val);\n      if (isLinked) {\n        setDivergent(getInverse(val));\n      }\n    }\n  }\n\n  const isValidDegrees = value => {\n    return true; // disable\n    // const intValue = parseInt(value);\n    // return (value === '' || \n    //   (/^\\d+$/.test(value) && intValue >= 0 && intValue <= 360));\n  }\n\n  const handleDivergentChange = e => {\n    const val = parseInt(e.target.value);\n    if (isValidDegrees(val)) {\n      setDivergent(val);\n      if (isLinked) {\n        setStraight(getInverse(val));\n      }\n    }\n  }\n  const sendDegrees = async degrees => {\n    const turnout = await api.turnouts.put({ turnoutId, current: parseInt(degrees) });\n    await dispatch({ type: 'UPDATE_TURNOUT', payload: turnout });\n    return turnout;\n  }\n\n  return (\n    <Dialog open={open} onClose={handleClose} maxWidth=\"md\" aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">Turnout Settings</DialogTitle>\n      <Divider />\n      <DialogContent>\n        <Box mt={1} mb={3}>\n          <DialogContentText>\n            Changes are not saved until you click save.\n          </DialogContentText>\n          <Grid container spacing={1}>\n            <Grid item xs={3}>\n              <TextField\n                margin=\"dense\"\n                id=\"number\"\n                label=\"Switch Num\"\n                size=\"small\"\n                disabled\n                value={turnoutId}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <LockOpen />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Grid>\n            <Grid item xs={3}>\n              <TextField\n                margin=\"dense\"\n                id=\"line\"\n                label=\"Line\"\n                size=\"small\"\n                value={line}\n                onChange={e => setLine(e.target.value)}\n                // InputProps={{\n                //   startAdornment: (\n                //     <InputAdornment position=\"start\">\n                //       <Info />\n                //     </InputAdornment>\n                //   ),\n                // }}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <TextField\n                fullWidth\n                margin=\"dense\"\n                id=\"name\"\n                label=\"Switch Name\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      {/* <Bookmark /> */}\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      </DialogContent>\n      <Divider />\n      <DialogTitle id=\"form-servo-title\">\n        {!isLocked && (\n          <IconButton aria-label=\"lock\" onClick={handleLock}>\n            <LockOpen />\n          </IconButton>\n        )}\n        {isLocked && (\n          <IconButton aria-label=\"lock\" onClick={handleUnlock}>\n            <Lock />\n          </IconButton>\n        )}\n        Configure Servo\n      </DialogTitle>\n      <DialogContent>\n        <Grid container spacing={1}>\n          <Grid item xs={9}>\n            <TextField\n              margin=\"dense\"\n              id=\"straight\"\n              label=\"Straight\"\n              width=\"100px\"\n              disabled={isLocked || isLoading}\n              value={straight}\n              onChange={handleStraightChange}\n            />\n            {/* {isLinked && (\n              <IconButton aria-label=\"unlink\" onClick={handleUnlink} disabled={isLocked || isLoading}>\n                <LinkIcon />\n              </IconButton>\n            )}\n            {!isLinked && (\n              <IconButton aria-label=\"link\" onClick={handleLink} disabled={isLocked || isLoading}>\n                <LinkOffIcon />\n              </IconButton>\n            )} */}\n            <TextField\n              margin=\"dense\"\n              id=\"divergent\"\n              label=\"Divergent\"\n              width=\"100px\"\n              disabled={isLocked || isLoading}\n              value={divergent}\n              onChange={handleDivergentChange}\n            />\n            <Box my={1}>\n              <ButtonGroup variant=\"outlined\" color=\"primary\">\n                <Button onClick={handleResetServo} disabled={isLocked || isLoading} startIcon={<RestoreIcon />}>\n                  Reset\n                </Button>\n                <Button onClick={() => handleServo(straight)} disabled={isLoading}>\n                  Straight\n                </Button>\n                <Button onClick={() => handleServo(divergent)} disabled={isLoading}>\n                  Divergent\n                </Button>\n                <Button onClick={() => handleServo((straight + divergent) / 2)} disabled={isLoading}>\n                  Center&deg;\n                </Button>\n              </ButtonGroup>\n              \n            </Box>\n            </Grid>\n            {/* <Grid item xs={3}>\n              {isLoading && (<CircularProgress color=\"primary\" className=\"spinner\" />)}\n              {!isLoading && !isPristine && (<ErrorIcon color=\"action\" style={{ color: green[500], fontSize: 80 }} />)}\n              {hasError && !isLoading && (<ErrorIcon color=\"error\" style={{ fontSize: 80 }} />)}\n            </Grid> */}\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} color=\"primary\">\n            Save\n          </Button>\n        </DialogActions>\n      </Dialog>\n  );\n}\n\nexport default Settings;\n","import React, { useState, useEffect, useContext } from 'react';\nimport * as Colors from '@mui/material/colors';\n// import SwitchImg from './switch.svg';\nimport { ReactComponent as Logo } from './switch.svg';\nimport { ReactComponent as TurnoutStriaghtImage } from '../Shared/Images/turnout-straight.svg';\nimport { ReactComponent as TurnoutDivergentImage } from '../Shared/Images/turnout-divergent.svg';\nimport { ReactComponent as TurnoutDImage } from '../Shared/Images/turnout-export.svg';\n\nimport Box from '@mui/material/Box';\nimport Chip from '@mui/material/Chip';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardContent';\nimport CardContent from '@mui/material/CardContent';\nimport CardActions from '@mui/material/CardActions';\nimport CardActionArea from '@mui/material/CardActionArea';\nimport CardMedia from '@mui/material/CardMedia';\nimport Switch from '@mui/material/Switch';\n\n// import CallSplit from '@mui/icons-material/CallSplit';\nimport RestoreIcon from '@mui/icons-material/Restore';\nimport PowerIcon from '@mui/icons-material/Power';\nimport TuneIcon from '@mui/icons-material/Tune';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport IconButton from '@mui/material/IconButton';\n// import LinkIcon from '@mui/icons-material/Link';\nimport SettingsBackupRestoreIcon from '@mui/icons-material/SettingsBackupRestore';\nimport ShuffleIcon from '@mui/icons-material/Shuffle';\nimport LinkOffIcon from '@mui/icons-material/LinkOff';\nimport myIcon from '@mui/icons-material/'\nimport WifiTetheringIcon from '@mui/icons-material/WifiTethering';\nimport PortableWifiOffIcon from '@mui/icons-material/PortableWifiOff';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Snackbar from '@mui/material/Snackbar';\nimport Settings from './Settings';\nimport { Context } from '../Store/Store';\nimport api from '../Api';\nimport './Turnout.scss';\n// import { linesConfig } from '../Api';\n\n\nexport const linesConfig = [\n  { lineId: 'Demo Track', label: 'Mainline SB', color: Colors.red[500] }\n];\nconst defaultLine = { lineId: 'Unknown Line', label: 'Unknown Line', color: Colors.grey[500] };\n\n\nexport const Turnout = props => {\n\n  const { config } = props;\n  const { type, current, straight, divergent, relay, servo, name, turnoutId, 'default': defaultOrientation } = config;\n  \n  const [ state, dispatch ] = useContext(Context);\n\n  const [isDivergent, setIsDivergent] = useState(current === divergent);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [isPristine, setIsPristine] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n\n  useEffect(() => {\n    setIsDivergent(current === divergent);\n  }, [current, divergent]);\n\n  const handleToggle = async e => {\n    if (isLoading) { \n      return;\n    }\n    try {\n      setIsLoading(true);\n      setIsPristine(false);\n      const newCurrent = isDivergent ? straight : divergent;\n      console.log('handleToggle', newCurrent , straight, divergent, servo != null);\n      const turnout = await api.turnouts.put({ turnoutId, current: newCurrent });\n      await dispatch({ type: 'UPDATE_TURNOUT', payload: turnout });\n    } catch (err) {\n      console.error(err);\n      setError(err.toString());\n    } finally {\n      setIsLoading(false);\n    }\n    \n  }\n\n  const getLineColor = () => {\n    return defaultLine.color;\n  }\n\n  const handleReset = async e => {\n    const turnout = await api.turnouts.put({ turnoutId, current: defaultOrientation === 'straight' ? straight : divergent });\n    await dispatch({ type: 'UPDATE_TURNOUT', payload: turnout });\n  }\n\n  const handleSettings = () => setShowSettings(true);\n\n  const hideSettings = () => setShowSettings(false);\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setError(undefined);\n  };\n\n\treturn (\n    <Card className={`turnout turnout--compact`}>\n      <CardHeader className=\"turnout__header\">\n        <Chip\n            label={`${name}`}\n            // icon={<CallSplit />}\n            variant=\"outlined\"\n            className=\"chip\"\n            size=\"small\"\n            style={{ backgroundColor: getLineColor() }}\n            clickable\n            onClick={handleToggle}\n          />\n          <Box className=\"turnout__header__status\">\n            {isLoading || isPristine \n              ? <PortableWifiOffIcon style={{color: 'gray'}} /> \n              :  <WifiTetheringIcon style={{color: 'green'}} />}\n            {relay && (\n              <PowerIcon style={{ color: 'green'}}\n              />\n            )}\n        </Box>\n      </CardHeader>\n      <CardContent className=\"turnout__id\">\n\n\n        <CardActionArea className={`turnout__state ${isLoading ? 'loading' : ''}`} onClick={handleToggle}>\n          <CardMedia\n            component=\"div\"\n            height=\"100%\"\n            title=\"Turnout State\"\n            className=\"media-container\"        \n          >\n            <div className=\"svg-wrapper\">\n              {/* <Logo width=\"90\" className={`turnout-image ${isDivergent ? 'divergent' : 'straight'}`} /> */}\n              {isDivergent ? <TurnoutDivergentImage width=\"90\" /> : <TurnoutStriaghtImage width=\"90\" />}\n            </div>\n            {isLoading && (<CircularProgress color=\"primary\" className=\"spinner\" />)}\n          </CardMedia>\n        </CardActionArea>\n          \n        <Box my={1} className=\"turnout__desc compact-hidden\">\n          <Typography component=\"h6\" variant=\"h6\" gutterBottom>\n            {name}\n          </Typography>\n          <Typography component=\"small\" gutterBottom>\n            Angle: {current}\n          </Typography>\n          {/* {(crossover || reverse) && (\n          <Box className=\"turnout__link\">\n              {crossover && (\n                <Chip\n                  label={`Crossover`}\n                  icon={<ShuffleIcon />}\n                  color={`${isLinked ? 'primary' : 'default'}`}\n                  size=\"small\"\n                />\n              )}\n              {reverse && (\n                <Chip\n                  label={`Reverse: ${linkedTurnout.label}`}\n                  icon={<SettingsBackupRestoreIcon />}\n                  color={`${isLinked ? 'primary' : 'default'}`}\n                  size=\"small\"\n                />\n              )}\n              <Switch checked={isLinked} onChange={handleLinkedChange} name=\"islinked\" />\n              {isLinked \n                    ? <LinkIcon style={{color: 'green'}} />\n                    : <LinkOffIcon style={{color: 'gray'}} />\n                  }\n          </Box>)} */}\n          \n        </Box>\n\n      </CardContent>\n      <CardActions className=\"tournout__actions\">\n        <Button \n          className=\"compact-hidden\"\n          variant=\"contained\" \n          color=\"primary\" \n          onClick={handleToggle}\n          // startIcon={<CallSplit />}\n          >\n            Toggle\n        </Button>\n        <span>\n          <IconButton variant=\"outlined\" onClick={handleReset} color=\"primary\" disabled={isLoading}>\n            <RestoreIcon />\n          </IconButton>\n          {/* <IconButton variant=\"outlined\" color=\"default\">\n            <MapIcon />\n          </IconButton> */}\n          <IconButton variant=\"outlined\" color=\"default\" onClick={handleSettings}>\n            <TuneIcon />\n          </IconButton>\n        </span>\n      </CardActions>\n      <Settings \n        open={showSettings} \n        config={config} \n        onClose={hideSettings}\n      />\n\n      <Snackbar open={!!error} autoHideDuration={6000} onClose={handleClose} message={error} />\n    </Card>\n\t)\n\n}\n\nexport default Turnout;","var _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction Svg4Left(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 217 60\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    xmlSpace: \"preserve\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 1.5\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(2,0,0,2,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard1\",\n    transform: \"matrix(0.0844071,0,0,0.0374906,0,0)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: 1280,\n    height: 800,\n    style: {\n      fill: \"none\"\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(11.8473,0,0,26.6734,0,0)\",\n    className: \"divergent\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.464,15.385L24.021,15.385C24.021,15.385 57.824,11.295 63.647,10.351C69.47,9.406 101.344,2.157 101.344,2.157L105.11,13.807L68.64,22.195L24.737,27.411L2.49,27.313L2.464,15.385Z\",\n    style: {\n      stroke: \"rgb(61,61,61)\",\n      strokeWidth: 1\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(11.8473,0,0,26.6734,-0.407078,5.04809)\",\n    className: \"straight\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 2.584,\n    y: 15.473,\n    width: 102.471,\n    height: 11.849,\n    style: {\n      stroke: \"rgb(61,61,61)\",\n      strokeWidth: 1\n    }\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(Svg4Left);\nexport default __webpack_public_path__ + \"static/media/4-left.4f29a446.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _clipPath, _g, _g2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTamSouthLines(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 155 90\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    style: {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeMiterlimit: 1.5\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,-66.0732,0)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard3\",\n    transform: \"matrix(0.701398,0,0,0.817859,63.9469,98.1431)\"\n  }, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 3.032,\n    y: -120,\n    width: 220.969,\n    height: 110\n  })), _clipPath || (_clipPath = /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"_clip1\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 3.032,\n    y: -120,\n    width: 220.969,\n    height: 110\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#_clip1)\"\n  }, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer4\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"lines\",\n    transform: \"matrix(1.42572,0,0,1.2227,-91.1706,-120)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M210.073,24L150.027,84.046\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.834661,0,0,0.834661,32.7493,1.98407)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M198.073,12L126.188,83.886\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: \"2.4px\"\n    }\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M66.073,84.404L198.073,84.404\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1.33333,0,0,1.33333,-22.0244,-23.9829)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M66.073,71.949L138.073,71.949\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: \"1.5px\"\n    }\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M66.073,60L174.073,60\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M66.073,47.943L186.073,47.943\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,36L138.073,36\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M138.073,36L126.367,47.706\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(34,219,255)\",\n      strokeWidth: 2\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,0,0.113241)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M221.06,11.887L66.073,11.887\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(0,171,0)\",\n      strokeWidth: 2\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.0774259,0.0774259,-0.0792739,0.0792739,145.9,5.94191)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M221.06,11.887L66.073,11.887\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(0,171,0)\",\n      strokeWidth: \"18.05px\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,7.10543e-15,12.1132)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M221.06,11.887L66.073,11.887\",\n    style: {\n      fill: \"none\",\n      stroke: \"rgb(0,171,0)\",\n      strokeWidth: 2\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t105\",\n    transform: \"matrix(1.42572,0,0,1.2227,-91.1706,-120)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,-1.09602,-0.05725)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.707107,-0.707107,0.707107,0.707107,20.1388,146.307)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t106\",\n    transform: \"matrix(1.42572,0,0,1.2227,-108.416,-105.258)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,-1.09602,-0.05725)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.707107,-0.707107,0.707107,0.707107,20.1388,146.307)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t101\",\n    transform: \"matrix(1.42572,0,0,1.2227,-128.024,-89.0408)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,3.88808,11.0838)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.506722,-0.506722,0.506722,0.506722,64.6929,121.038)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"3.35px\",\n      strokeLinecap: \"butt\"\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t110\",\n    transform: \"matrix(1.42572,0,0,1.2227,-162.226,-89.0408)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1,0,0,1,4.49271,-25.3775)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.707107,-0.707107,0.707107,0.707107,20.7434,109.846)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t104\",\n    transform: \"matrix(1.42572,0,0,1.2227,-110.384,-132.549)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.839868,0,0,0.932393,30.1429,1.50832)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.7px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.707107,-0.707107,0.707107,0.707107,21.4699,144.69)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t102\",\n    transform: \"matrix(1.42572,0,0,1.2227,-76.19,-161.894)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.839868,0,0,0.932393,30.1429,1.50832)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.7px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.707107,-0.707107,0.707107,0.707107,21.4699,144.69)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.4px\",\n      strokeLinecap: \"butt\"\n    }\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"turnout\",\n    id: \"t101\",\n    transform: \"matrix(1.42572,0,0,1.2227,-112.2,-161.09)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.839868,0,0,0.932393,21.1807,0.851025)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.7px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.839868,0,0,0.932393,19.3909,12.851)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.7px\",\n      strokeLinecap: \"butt\"\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.798458,0.798458,-0.798458,0.798458,65.9963,-129.873)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M174.073,48L184.499,48\",\n    style: {\n      display: \"none\",\n      fill: \"none\",\n      stroke: \"black\",\n      strokeWidth: \"2.13px\",\n      strokeLinecap: \"butt\"\n    }\n  }))))), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer3\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTamSouthLines);\nexport default __webpack_public_path__ + \"static/media/tam-south-lines.d0275103.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, useContext } from 'react';\nimport * as Colors from '@mui/material/colors';\n// import SwitchImg from './switch.svg';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Snackbar from '@mui/material/Snackbar';\nimport Settings from './Settings';\nimport { ReactComponent as Turnout4Left } from '../Shared/Images/TurnoutMasks/4-left.svg';\nimport { Context } from '../Store/Store';\nimport api from '../Api';\nimport './Turnout.scss';\n// import { linesConfig } from '../Api';\n\n\nexport const linesConfig = [\n  { lineId: 'Mainline Red', label: 'Mainline SB', color: Colors.red[500] },\n  { lineId: 'Mainline Green', label: 'Mainline NB', color: Colors.green[500] },\n  { lineId: 'Tamarack Station', label: 'Tamarack Station North', color: Colors.cyan[500] }\n];\n\n\nexport const MapTurnout = props => {\n\n  const { config } = props;\n  \n  const [ state, dispatch ] = useContext(Context);\n\n  const [isDivergent, setIsDivergent] = useState(config.current === config.divergent);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [isPristine, setIsPristine] = useState(true);\n  const { current, turnoutId, straight, divergent, section, 'default': defaultOrientation } = config;\n\n  useEffect(() => {\n    setIsDivergent((current === divergent));\n  }, [current, straight, divergent]);\n\n  const handleToggle = async e => {\n    if (isLoading) { \n      return;\n    }\n    try {\n      setIsLoading(true);\n      setIsPristine(false);\n      const turnout = await api.turnouts.put({ turnoutId, current: isDivergent ? straight : divergent });\n      await dispatch({ type: 'UPDATE_TURNOUT', payload: turnout });\n    } catch (err) {\n      console.error(err);\n      setError(err.toString());\n    } finally {\n      setIsLoading(false);\n    }\n    \n  }\n\n\treturn (\n    \n    <button\n      onClick={handleToggle} \n      className={`turnout__layout__switch turnout__layout__switch--${section.replace(/\\s+/g, '-').toLowerCase()} turnout__layout__switch--${turnoutId} turnout__layout__switch--${isDivergent ? 'divergent' : 'straight'}`}>\n        <Turnout4Left className=\"turnout__layout__switch__img\" />\n    </button>\n\t)\n\n}\n\nexport default MapTurnout;","export default __webpack_public_path__ + \"static/media/tamarack-station-south.c1c848d8.png\";","import React, { useContext } from 'react';\nimport Grid from '@mui/material/Grid';\nimport Turnout from './Turnout';\nimport MapTurnout from './MapTurnout';\nimport tamarackStationSouthImage from '../Layout/images/tam/tamarack-station-south.png';\nimport { ReactComponent as Turnout4Left } from '../Shared/Images/TurnoutMasks/4-left.svg';\nimport { ReactComponent as TamSouth } from '../Layout/images/tam/tam-south-lines.svg';\n\nimport { Context } from '../Store/Store';\nimport api from '../Api';\nimport './Turnouts.scss';\n\nexport const Turnouts = props => {\n\n  const { view, filter, groupBy } = props;\n\n  const [ state, dispatch ] = useContext(Context);\n  const { turnouts } = state;\n\n  const lines = filter(turnouts).reduce((acc, curr) => {\n    if (!acc.includes(curr.line)) {\n      acc.push(curr.line);\n    }\n    return acc;\n  }, []);\n\n  const sections = filter(turnouts).reduce((acc, curr) => {\n    if (!acc.includes(curr.section)) {\n      acc.push(curr.section);\n    }\n    return acc;\n  }, []);\n\n  return turnouts ? (\n    <Grid container className={`turnouts turnouts--${view}`}>\n      <Grid item sm={12}>\n        <TamSouth />\n      </Grid>\n      {groupBy === '' && (\n        <Grid item sm={12} className=\"turnout__grid-item\">\n          {turnouts.map(turnout => (\n            <div key={`turnout${groupBy}${turnout.turnoutId}`} className=\"turnout__container\">\n               <Turnout config={turnout} />\n            </div>\n          ))}\n        </Grid>\n      )}\n      {groupBy === 'line' && lines.map(line => (\n        <div key={`line-${line}`}>\n          <Grid item sm={12} className=\"turnout__grid-item\">\n            <h3>{line}</h3>\n          </Grid>\n          <Grid item sm={12} className=\"turnout__grid-item\">\n            {turnouts.filter(t => t.line === line).map(turnout => (\n              <div key={`turnout${groupBy}${turnout.turnoutId}`} className=\"turnout__container\">\n              {console.log('line', turnout, turnout.turnoutId)}\n                <Turnout config={turnout} />\n              </div>\n            ))}\n          </Grid>\n        </div>\n      ))}\n      {groupBy === 'board' && sections.map(section => (\n        <div key={`section-${section}`}>\n          <Grid item sm={12} className=\"turnout__grid-item\">\n            <h3>{section}</h3>\n          </Grid>\n          <Grid item sm={12} className=\"turnout__grid-item\">\n            {turnouts.filter(t => t.section === section).map(turnout => (\n              <div key={`turnout${groupBy}${turnout.turnoutId}`} className=\"turnout__container\">\n                <Turnout config={turnout} />\n              </div>\n            ))}\n          </Grid>\n          <Grid item sm={12} className=\"turnout__grid-item\">\n            \n\n            <div className=\"turnout__layout\">\n              <img src={tamarackStationSouthImage} />\n              {/* <button className=\"turnout__layout__switch turnout__layout__switch--ts10 turnout__layout__switch--ts10--divergent\"><Turnout4Left className=\"turnout__layout__switch__img\" /></button> */}\n              {turnouts.filter(t => t.section === section).map(turnout => (\n                <MapTurnout key={`mapturnout${groupBy}${turnout.turnoutId}`} config={turnout} />\n              ))}\n              \n              \n            </div>\n          </Grid>\n        </div>\n      ))}\n    </Grid>\n    \n  ) : null;\n\n}\n\nTurnouts.defaultProps = {\n  initialView: 'compact',\n  groupBy: '',\n  filter: turnouts => turnouts\n};\n\nexport default Turnouts;","import React, { useState } from 'react';\nimport Box from '@mui/material/Box';\nimport Slider from '@mui/material/Slider';\n\nexport const ThrottleSlider = props => {\n\n  const { speed, autoStop, onChange, max } = props;\n\n  const step = max > 30 ? 10 : 5;\n  const marks = Array.apply(null, Array(max * 2 / step + 1)).map((x, i) => {\n    const mark = (max * -1) + i * step;\n    return {\n      label: mark,\n      value: mark\n    };\n  });\n\n  const handleChange = (event, newValue) => {\n    onChange(newValue);\n  };\n\n  const handleChangeCommitted = (event, newValue) => {\n    console.log('handleChangeCommitted', autoStop);\n    if (autoStop) {\n      onChange(0);\n    }\n  };\n\n  return (\n    <Box display=\"flex\" className=\"throttle__slider__container\">\n      <Slider\n        orientation=\"vertical\"\n        defaultValue={0}\n        min={-max}\n        max={max}\n        marks={marks}\n        value={speed}\n        track={false}\n        aria-labelledby=\"vertical-slider\"\n        onChange={handleChange}\n        onChangeCommitted={handleChangeCommitted}\n        className={`throttle__slider \n        ${speed < 0 \n          ? 'throttle__speed--reverse' \n          : 'throttle__speed--forward'}`}\n          \n      />\n    </Box>\n  );\n\n}\n\nexport default ThrottleSlider;","import React, { useState, useEffect, useContext } from 'react';\nimport * as Colors from '@mui/material/colors';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Chip from '@mui/material/Chip';\n\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardContent from '@mui/material/CardContent';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport IconButton from '@mui/material/IconButton';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Dialog from '@mui/material/Dialog';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Tooltip from '@mui/material/Tooltip';\n\nimport TrainIcon from '@mui/icons-material/Train';\nimport ShareIcon from '@mui/icons-material/Share';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport SpeedIcon from '@mui/icons-material/Speed';\nimport LocalParkingIcon from '@mui/icons-material/LocalParking';\nimport PanToolIcon from '@mui/icons-material/PanTool';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport ReportIcon from '@mui/icons-material/Report';\nimport ExpandIcon from '@mui/icons-material/Expand';\nimport ThermostatAutoIcon from '@mui/icons-material/ThermostatAuto';\nimport CompressIcon from '@mui/icons-material/Compress';\nimport HighlightIcon from '@mui/icons-material/Highlight';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\n\nimport ThrottleSlider from './ThrottleSlider';\nimport ThrottleSpeed from './ThrottleSpeed';\nimport JmriThrottleController from './JmriThrottleController';\nimport Functions from './Functions';\nimport { Context } from '../Store/Store';\nimport useDebounce from '../Shared/Hooks/useDebounce';\nimport api from '../Api';\nimport './Throttle.scss';\n\n/*\n[ ] Cruise Control / Park\n[ ] Sticky Slider\n[ ] Slider maxSpeed\n*/\n\nexport const Throttle = props => {\n\n  // const EMERGENCY_STOP = '-1.0';\n\tconst STOP = '0.0';\n  // const FULL_SPEED = '1.0';\n\n  const { jmriApi, loco, onLocoClick, loco: { \n    address, \n    isAcquired, \n    speed, \n    autoStop,\n    forward\n  } } = props;\n  \n  const initialMaxSpeed = isNaN(loco.maxSpeed) ? 100 : loco.maxSpeed;\n  console.log('loco.maxSpeed', loco.address, loco.maxSpeed, initialMaxSpeed);\n  const initialUiSpeed = speed * 100 * (forward === true ? 1 : -1);\n\n  const [ state, dispatch ] = useContext(Context);\n  // const [ initialized, setInitialized ] = useState(false);\n  const [ uiSpeed, setUiSpeed ] = useState(initialUiSpeed);\n  const [ maxSpeed, setMaxSpeed ] = useState(initialMaxSpeed);\n  const [ minSpeed, setMinSpeed ] = useState(-initialMaxSpeed);\n  const [ precisonDialog, setPrecisonDialog ] = useState(false);\n  const debouncedSpeed = useDebounce(uiSpeed, 100);\n\n  // useEffect(() => {\n  //   if (!initialized) { // TODO: move to store\n  //     const jmriState = jmriApi.getState();\n  //     if (jmriState.ready) {\n  //       jmriReady();\n  //     } else {\n  //       jmriApi.on('ready', 'Throttle', jmriReady);\n  //     }\n  //   }\n  // }, [ initialized, jmriApi ]);\n\n  // const jmriReady = () => {\n  //   setInitialized(true);\n  // }\n\n  const handleSliderSpeed = value => {\n    setUiSpeed(value);\n  }\n\n  const handleStopClick = () => {\n    setUiSpeed(parseInt(STOP));\n  }\n\n  const handleUpClick = () => {\n    setUiSpeed(uiSpeed + 1);\n  }\n\n  const handleDownClick = () => {\n    setUiSpeed(uiSpeed - 1);\n  }\n\n  const handleLocoClick = () => {\n    if (onLocoClick) {\n      onLocoClick(loco);\n    }\n  }\n\n  const handleCruiceControlClick = async () => {\n    try {\n      await dispatch({ type: 'UPDATE_LOCO', payload: { address, cruiseControl: true } });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  const handleParkClick = async () => {\n    try {\n      const res = await jmriApi.releaseLoco(address);\n      await dispatch({ type: 'UPDATE_LOCO', payload: { address, isAcquired: false, cruiseControl: false } });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  const handleStickyThrottleClick = async () => {\n    try {\n      const newAutoStop = !loco.autoStop;\n      console.log('handleStickyThrottleClick', newAutoStop, loco);\n      await api.locos.put({ address, autoStop: newAutoStop });\n      await dispatch({ type: 'UPDATE_LOCO', payload: { address, autoStop: newAutoStop } });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  const handleThrottlePrecisionClick = () => {\n    setPrecisonDialog(true);\n  }\n  \n  const handlePrecisonClose = () => {\n    setPrecisonDialog(false);\n  }\n  \n  const handlePrecisionChange = async (event) => {\n    try {\n      setMaxSpeed(event.target.value);\n      setMinSpeed(-event.target.value);\n      setPrecisonDialog(false);\n      await api.locos.put({ address, maxSpeed });\n      await dispatch({ type: 'UPDATE_LOCO', payload: { address, maxSpeed } });\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const roadClassName = () => {\n    return loco.road.toLowerCase().replace(/ /g, '-');\n  }\n\n  const formattedAddress = () => loco.address && loco.address.length > 2\n    ? loco.address.substring(0, 2)\n    : loco.address;\n\n  return (\n    <>\n      <Card \n        className={`throttle throttle--${loco.name.replace(' ', '')}  throttle--${loco.road.replace(' ', '')}`} >\n\n        <CardHeader\n          title={loco.name}\n          avatar={\n            <Chip\n                label={`${formattedAddress()}`}\n                icon={<TrainIcon />}\n                className={roadClassName()}\n                clickable\n                onClick={handleLocoClick}\n              />\n          }\n          // action={\n          //   <IconButton aria-label=\"settings\" onClick={handleMenuClick}>\n          //     <MoreVertIcon />\n          //   </IconButton>\n          // }\n        />\n        <CardContent className=\"throttle__content grow flex\">\n          {(true || loco.isAcquired) && \n            <Grid container spacing={1} className=\"grow\">\n              <Grid item xs={5} flexGrow={1} display=\"flex\">\n                  {isAcquired && (\n                    <JmriThrottleController \n                      speed={debouncedSpeed} \n                      address={address} \n                      jmriApi={jmriApi} \n                      forward={forward} \n                    />\n                  )}\n                  <ThrottleSlider \n                    max={maxSpeed} \n                    className=\"throttle__slider__control\" \n                    speed={uiSpeed} \n                    autoStop={autoStop} \n                    onChange={handleSliderSpeed} \n                  />\n              </Grid>\n              <Grid item xs={7} display=\"flex\">\n                {/* <Functions /> */}\n                {/* <div className=\"throttle__space\"></div> */}\n                <div className=\"throttle__controls\">\n                  <Paper elevation={3} className=\"\" display=\"flex\" direction=\"column\">\n                    {/* <pre>speed={loco.speed}</pre>\n                    <pre>uiSpeed={uiSpeed}</pre> */}\n                    <ThrottleSpeed speed={uiSpeed} />\n                    <ButtonGroup\n                        orientation=\"vertical\"\n                        className=\"throttle__controls__group\"\n                        aria-label=\"vertical outlined primary button group\"\n                      >\n                      <IconButton \n                        className=\"speed-up-btn\"\n                        size=\"large\" \n                        disabled={speed === maxSpeed} \n                        onClick={handleUpClick}>\n                          <AddIcon />\n                        </IconButton>\n                      <IconButton \n                        className=\"speed-stop-btn\"\n                        size=\"large\" \n                        disabled={!isAcquired} \n                        color=\"primary\" \n                        onClick={handleStopClick} >\n                          <PanToolIcon />\n                        </IconButton>\n                      <IconButton \n                        className=\"speed-down-btn\"\n                        size=\"large\" \n                        disabled={speed === minSpeed} \n                        onClick={handleDownClick}>\n                          <RemoveIcon />\n                      </IconButton>\n                    </ButtonGroup>\n\n                  </Paper>\n                  <div>\n                    <IconButton size=\"large\" onClick={handleCruiceControlClick} ><SpeedIcon /></IconButton>\n                    <IconButton size=\"large\" onClick={handleParkClick} ><LocalParkingIcon /></IconButton>\n                    <IconButton size=\"large\" onClick={handleThrottlePrecisionClick} ><ThermostatAutoIcon /></IconButton>\n                    <IconButton size=\"large\" onClick={handleStickyThrottleClick} >\n                      {autoStop  ? <CompressIcon /> : <ExpandIcon/>}\n                    </IconButton>\n                    {/* <IconButton size=\"large\" ><HighlightIcon/></IconButton>                  \n                    <IconButton size=\"large\" disabled><SettingsIcon/></IconButton>                  \n                    <IconButton size=\"large\" disabled ><FavoriteIcon/></IconButton>                   */}\n                  </div>\n                </div>\n              </Grid>\n            </Grid>\n          }\n        </CardContent>\n        \n      </Card>\n\n      <Dialog onClose={handlePrecisonClose} open={precisonDialog}>\n        <DialogTitle>Set Throttle Min/Max</DialogTitle>\n        <FormControl fullWidth sx={{ padding: '1rem' }}>\n          <InputLabel id=\"minmax-label\">Precison</InputLabel>\n          <Select\n            labelId=\"minmax-label\"\n            id=\"minmax\"\n            value={maxSpeed}\n            label=\"Precison\"\n            onChange={handlePrecisionChange}\n          >\n            <MenuItem value={100}>100</MenuItem>\n            <MenuItem value={50}>50</MenuItem>\n            <MenuItem value={30}>30</MenuItem>\n            <MenuItem value={20}>20</MenuItem>\n          </Select>\n        </FormControl>\n      </Dialog>\n    </>\n  )\n}\n\nexport default Throttle;\n","import React, { useContext } from 'react';\nimport Box from '@mui/material/Box';\nimport Throttle from './Throttle';\nimport MiniThrottles from './MiniThrottles';\nimport { Context } from '../Store/Store';\nimport jmriApi from '../Shared/jmri/jmriApi';\n\nimport './Throttles.scss';\n\nexport const Throttles = props => {\n\n  const [ state, dispatch ] = useContext(Context);\n  const { locos } = state;\n  \n  return locos && locos.length  ? (\n    <Box display=\"flex\" flexDirection=\"column\" flexGrow={1}>\n      <Box \n        flexGrow={1} \n        display=\"flex\" \n        flexDirection=\"row\" \n        className={`throttles__acquired  throttles__acquired--view-comfy`}>\n        {locos.filter(loco => loco.isAcquired && !loco.cruiseControl).map(loco => \n            <Throttle key={loco.address} jmriApi={jmriApi} loco={loco} />\n        )}        \n      </Box>\n      <Box className={`throttles__cruise-control`}>\n        <MiniThrottles \n          locos={locos.filter(loco => loco.isAcquired && loco.cruiseControl)} \n          jmriApi={jmriApi} \n        />\n      </Box>\n      <Box className=\"throttles__unaquired\">\n        <MiniThrottles \n          locos={locos.filter(loco => !loco.isAcquired)} \n          jmriApi={jmriApi}  \n        />\n      </Box>\n    </Box>\n  ) : null;\n\n}\n\nexport default Throttles;","import React from 'react';\nimport Grid from '@mui/material/Grid';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport FiberManualRecordIcon from '@mui/icons-material/FiberManualRecord';\n\nexport const Signal = props => {\n\n  const { effect, effect: { effectId }, onChange, getMetaData, view } = props;\n\n  const handleChange = (event, newValue) => {\n    onChange({ effectId, state: newValue });\n  };\n\n  const isSmallView = (view === 'pill' || view === 'tiny');\n\n  return (\n    <Grid container direction=\"row\">\n      {!isSmallView && (<Grid item xs={9}>\n        {getMetaData(effect)}\n      </Grid>)}\n      <Grid item xs={isSmallView ? 12 : 3}>\n        <ToggleButtonGroup \n          size=\"small\" \n          orientation={isSmallView ? 'horizontal' : 'vertical'}\n          value={effect.state} \n          exclusive \n          onChange={handleChange}>\n          <ToggleButton value=\"red\">\n            <FiberManualRecordIcon style={{color: 'red', opacity: effect.state == 'red' ? 1 : .1 }} />\n          </ToggleButton>\n          <ToggleButton value=\"yellow\">\n            <FiberManualRecordIcon style={{color: 'yellow', opacity: effect.state == 'yellow' ? 1 : .1 }} />\n          </ToggleButton>\n          <ToggleButton value=\"green\" >\n            <FiberManualRecordIcon style={{color: 'green', opacity: effect.state == 'green' ? 1 : .1 }} />\n          </ToggleButton>\n        </ToggleButtonGroup>\n      </Grid>\n    </Grid>  \n  );\n}\n\nexport default Signal;","import React, { useContext, useState } from 'react';\nimport * as Colors from '@mui/material/colors';\nimport Grid from '@mui/material/Grid';\nimport Chip from '@mui/material/Chip';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardContent from '@mui/material/CardContent';\nimport Avatar from '@mui/material/Avatar';\nimport Switch from '@mui/material/Switch';\nimport Button from '@mui/material/Button';\nimport ShareIcon from '@mui/icons-material/Share';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport MusicNoteIcon from '@mui/icons-material/MusicNote';\nimport HighlightIcon from '@mui/icons-material/Highlight';\n// import DeviceHubIcon from '@mui/icons-material/DeviceHub';\nimport MovieFilterIcon from '@mui/icons-material/MovieFilter';\nimport TrafficIcon from '@mui/icons-material/Traffic';\nimport Signal from './Signal';\nimport { Context } from '../Store/Store';\nimport api from '../Api';\nimport { getSectionColor, getLineColor, getEffectColor } from '../config/config';\n\n\n\nexport const Effect = props => {\n\n  const { effect, effect: { effectId }, view } = props;\n\n  const [ state, dispatch ] = useContext(Context);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isPristine, setIsPristine] = useState(true);\n\n  const handleSwitchChange = (event) => {\n    updateEffect({ effectId, state: event.target.checked ? 1 : 0 })\n  };\n\n  const handleButtonClick = (event) => {\n    updateEffect({ effectId, state: 1 })\n  };\n\n  const updateEffect = async (changedEffect) => {\n    if (isLoading) { \n      return;\n    }\n    try {\n      setIsLoading(true);\n      setIsPristine(false);\n      const newEffect = await api.effects.put(changedEffect);\n      await dispatch({ type: 'UPDATE_EFFECT', payload: newEffect });\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  const getMetaData = effect => (\n    <div className=\"effect__meta\">\n      <p>\n        <strong>{effect.actions.length}</strong> Actions \n        | \n        State: <strong>{effect.state}</strong>\n      </p>\n      {effect.line && (<Chip \n        label={`Line: ${effect.line}`} \n        size=\"small\"\n        variant=\"outlined\"\n        style={{  \n          margin: '0.25rem',\n          borderColor: getLineColor(effect.line) \n        }}\n      />)}\n      {effect.section && (<Chip \n        label={`Section: ${effect.section}`} \n        size=\"small\"\n        variant=\"outlined\"\n        style={{  \n          margin: '0.25rem',\n          borderColor: getSectionColor(effect.section)\n        }}\n      />)}\n    </div>\n  );\n\n  const isSmallView = (view === 'pill' || view === 'tiny');\n  const size = isSmallView ? 'small' : 'large';\n\n  const getAvatar = () => {\n    switch(effect.type.toLowerCase()) {\n      case 'light':\n        return (<HighlightIcon fontSize={size} />);\n      case 'lighting animation':\n        return (<MovieFilterIcon fontSize={size} />);\n      case 'signal':\n        return (<TrafficIcon fontSize={size} />);\n      case 'sound':\n      case 'sound loop':\n        return (<MusicNoteIcon fontSize={size} />);\n      default:\n        return effect.type.substring(0, 1);                                                                                \n    }\n  }\n\n  const getAction = () => {\n    switch(effect.type.toLowerCase()) {\n      case 'signal':\n        return null;\n      case 'sound':\n        return (\n            <Button \n              onClick={handleButtonClick} \n              color=\"secondary\" \n              size=\"small\"\n              variant=\"outlined\" \n              startIcon={<MusicNoteIcon />}>\n                Play\n            </Button>\n          );\n      default:\n        return (\n          <Switch\n            checked={!!effect.state}\n            onChange={handleSwitchChange}\n            name=\"effectSwitch\"\n            inputProps={{ 'aria-label': 'secondary checkbox' }}\n          />\n        )                    \n    }\n  }\n\n  const renderContent = () => {\n    switch(effect.type.toLowerCase()) {\n      case 'signal':\n        return (<Signal effect={effect} getMetaData={getMetaData} onChange={updateEffect} view={view} />);\n      default:\n        return (\n        <Grid container direction=\"row\">\n          {!isSmallView && (<Grid item xs={9}>\n            {getMetaData(effect)}\n          </Grid>)}\n          <Grid item xs={isSmallView ? 12 : 3}>\n            {getAction()}\n          </Grid>\n        </Grid>);\n    }\n  }\n\n  return (\n    <Card className=\"effect\">\n      <CardHeader\n        avatar={\n          <Avatar>\n            {getAvatar()}\n          </Avatar>}\n        title={effect.name}\n      />\n      <CardContent>\n          {renderContent()}\n      </CardContent>\n      \n    </Card>\n  )\n\n}\n\nexport default Effect;","import React, { useContext } from 'react';\nimport Grid from '@mui/material/Grid';\nimport { Context } from '../Store/Store';\nimport Effect from './Effect';\nimport './Effects.scss';\n\nexport const Effects = props => {\n\n  const { view, filter, groupBy } = props;\n\n  const [ state, dispatch ] = useContext(Context);\n  const { effects, sensors } = state;\n\n  return (\n    <Grid container className={`effects  effects--${view}`} spacing={2}>  \n      {effects && effects.map(effect => (\n        <Grid item key={`effect${effect.effectId}`} className=\"effects__grid-item\" xs=\"auto\">\n            <Effect effect={effect} sensors={sensors} view={view} key={effect.effectId} />\n        </Grid>\n      ))}\n    </Grid>    \n  );\n\n}\n\nEffects.defaultProps = {\n  initialView: 'compact',\n  groupBy: '',\n  filter: turnouts => turnouts\n};\n\nexport default Effects;","import React, { useState, useEffect, useContext } from 'react';\nimport Paper from '@mui/material/Paper';\nimport Chip from '@mui/material/Chip';\nimport TrainIcon from '@mui/icons-material/Train';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport OpenInBrowserIcon from '@mui/icons-material/OpenInBrowser';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport IconButton from '@mui/material/IconButton';\nimport ThrottleSpeed from './ThrottleSpeed';\nimport JmriThrottleController from './JmriThrottleController';\nimport PanToolIcon from '@mui/icons-material/PanTool';\nimport LocalParkingIcon from '@mui/icons-material/LocalParking';\nimport { Context } from '../Store/Store';\nimport useDebounce from '../Shared/Hooks/useDebounce';\n\nexport const MiniThrottle = props => {\n\n  const [ state, dispatch ] = useContext(Context);\n  const maxSpeed = 100;\n  const minSpeed = -maxSpeed;\n\tconst STOP = '0.0';\n\n  const { jmriApi, onLocoClick, loco, loco: { \n    address, \n    isAcquired, \n    speed, \n    forward\n  } } = props;\n\n\n  const initialUiSpeed = speed * 100 * (forward === true ? 1 : -1);\n\n  const [ uiSpeed, setUiSpeed ] = useState(initialUiSpeed);\n  const [ dirty, setDirty ] = useState(speed ? speed * 100 : 0);\n  const debouncedSpeed = useDebounce(uiSpeed, 100);\n\n  const handleLocoAcquired = async address => {\n    await dispatch({ type: 'UPDATE_LOCO', payload: { address, isAcquired: true } });\n  }\n\n  const handleStopClick = () => {\n    setUiSpeed(parseInt(STOP));\n  }\n\n  const handleUpClick = () => {\n    setUiSpeed(uiSpeed + 1);\n  }\n\n  const handleDownClick = () => {\n    setUiSpeed(uiSpeed - 1);\n  }\n\n  const handleLocoClick = async () => {\n    try {\n      if (isAcquired) {\n        await dispatch({ type: 'UPDATE_LOCO', payload: { address, cruiseControl: false } });\n      } else {\n        await jmriApi.requestLoco(address);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n    \n    if (onLocoClick) {\n      onLocoClick(loco);\n    }\n  }\n\n  const handleParkClick = async () => {\n    try {\n      console.log('handleParkClick', address);\n      const res = await jmriApi.releaseLoco(address);\n      console.log('releaseLoco', res);\n      await dispatch({ type: 'UPDATE_LOCO', payload: { address, isAcquired: false, cruiseControl: false } });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  useEffect(() => {\n    jmriApi.on('acquire', 'Throttles', handleLocoAcquired);\n  }, [jmriApi, handleLocoAcquired]);\n\n  const computedClassName = () => {\n    return ['mini-throttle', isAcquired ? 'mini-throttle__acquired' : 'mini-throttle__notacquired'].join(' ');\n  }\n\n  return (\n    <Paper elevation={3} className={computedClassName()}>\n        <Chip\n            label={`${loco.address}`}\n            icon={<TrainIcon />}\n            className=\"chip\"\n            variant={isAcquired ? 'default' : 'outlined'}\n            clickable\n            onClick={handleLocoClick}\n          />\n      {isAcquired ? (\n        <>\n          <JmriThrottleController speed={debouncedSpeed} address={address} jmriApi={jmriApi} forward={forward} />\n          <ThrottleSpeed speed={debouncedSpeed} idleByDefault={loco.idleByDefault} />\n          \n          <ButtonGroup\n                      orientation=\"horizontal\"\n                      className=\"throttle__controls__group\"\n                      aria-label=\"vertical outlined primary button group\"\n                    >\n            <IconButton \n              className=\"speed-down-btn\"\n              size=\"lamediumrge\" \n              disabled={speed === minSpeed} \n              onClick={handleDownClick}>\n                <RemoveIcon />\n            </IconButton>\n            <IconButton \n              className=\"speed-stop-btn\"\n              size=\"medium\" \n              disabled={!isAcquired} \n              color=\"primary\" \n              onClick={handleStopClick} >\n                <PanToolIcon />\n              </IconButton>\n            <IconButton \n              className=\"speed-up-btn\"\n              size=\"medium\" \n              disabled={speed === maxSpeed} \n              onClick={handleUpClick}>\n                <AddIcon />\n            </IconButton>\n          </ButtonGroup>\n\n          <IconButton size=\"medium\" onClick={handleParkClick} ><LocalParkingIcon /></IconButton>\n                  \n          \n          {/* <IconButton  size=\"medium\" disabled={speed === minSpeed} onClick={handleDownClick}><RemoveIcon /></IconButton>\n          <IconButton size=\"medium\"  disabled={!isAcquired} variant=\"contained\" color=\"primary\" onClick={handleStopClick} ><PanToolIcon /></IconButton>\n          <IconButton variant=\"outlined\" size=\"medium\" disabled={speed === maxSpeed} onClick={handleUpClick}><AddIcon /></IconButton> */}\n        </>\n      ) : ( \n        <IconButton variant=\"outlined\" size=\"medium\" variant=\"contained\" color=\"primary\" onClick={handleLocoClick}><OpenInBrowserIcon /></IconButton>\n      )}\n      </Paper>\n  )\n\n}\n\nexport default MiniThrottle;\n","import React from 'react';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\nimport PanToolIcon from '@mui/icons-material/PanTool';\nimport MiniThrottle from './MiniThrottle';\nimport './MiniThrottles.scss';\n\nexport const MiniThrottles = ({ locos, jmriApi, onLocoClick }) => {\n\n  return locos.length > 0 \n    ? (\n        <Box display=\"flex\" flexDirection=\"row\"  flexWrap=\"wrap\" >\n          {locos.map(loco => (\n            <Box key={loco.address}>\n              <MiniThrottle loco={loco} jmriApi={jmriApi} onLocoClick={onLocoClick} />\n            </Box>\n          ))}\n        </Box>\n    ) : null;\n\n}\n\nexport default MiniThrottles;\n","import React from 'react';\n\nexport const menuConfig = {\n  view: 'compact'\n}\n\nexport const MenuContext = React.createContext(menuConfig);\n\nexport default MenuContext;\n","import React, { useState, useEffect, useContext } from 'react';\n\nimport * as Colors from '@mui/material/colors';\nimport Grid from '@mui/material/Grid';\nimport Paper from '@mui/material/Paper';\nimport Button from '@mui/material/Button';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport IconButton from '@mui/material/IconButton';\nimport Chip from '@mui/material/Chip';\nimport InputLabel from '@mui/material/InputLabel';\nimport FormHelperText from '@mui/material/FormHelperText';\nimport FormControl from '@mui/material/FormControl';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Switch from '@mui/material/Switch';\nimport Select from '@mui/material/Select';\nimport NativeSelect from '@mui/material/NativeSelect';\nimport Popover from '@mui/material/Popover';\n\n// import FilterListIcon from '@mui/icons-material/FilterList';\n// import DoneIcon from '@mui/icons-material/Done';\n\nimport ViewComfyIcon from '@mui/icons-material/ViewComfy';\nimport ViewModuleIcon from '@mui/icons-material/ViewModule';\n\nimport { Context } from '../Store/Store';\n\nexport const linesConfig = [\n  { lineId: 'Mainline Red', color: Colors.red[500] },\n  { lineId: 'Mainline Green', color: Colors.green[500] },\n  { lineId: 'Tamarack Station', color: Colors.cyan[500] }\n];\n\nexport const sectionsConfig = [\n  { sectionId: 'Tamarack South', color: Colors.blueGrey[500] },\n  { sectionId: 'Tamarack North', color: Colors.purple[500] }\n];\n\nexport const ConductorMenu = props => {\n\n  const [ state, dispatch ] = useContext(Context);\n\n  const { turnouts } = state;\n\n  const { onChange, defaults } = props;\n\n  const [ group, setGroup ] = useState(defaults.group);\n  const [ view, setView ] = useState(defaults.view);\n  const [ showMaps, setShowMaps ] = useState(defaults.showMaps);\n  const [ filterAnchorEl, setFilterAnchorEl] = useState(null);\n  const [ lineFilters, setLineFilters ] = useState(defaults.lineFilters);\n  const [ sectionFilters, setSectionFilters ] = useState(defaults.sectionFilters);\n\n  const views = [\n    { label: 'Pill', shortLabel: 'S', value: 'pill' },\n    { label: 'Tiny', shortLabel: 'M', value: 'tiny' },\n    { label: 'Compact', shortLabel: 'L', value: 'compact' }\n  ];\n\n  const groups = [\n    { label: '', value: '' },\n    { label: 'By Section', value: 'board' },\n    { label: 'By Line', value: 'line' },\n  ];\n\n  const lines = turnouts.reduce((acc, curr) => {\n    if (!acc.includes(curr.line)) {\n      acc.push(curr.line);\n    }\n    return acc;\n  }, []);\n\n  const sections = turnouts.reduce((acc, curr) => {\n    if (!acc.includes(curr.section)) {\n      acc.push(curr.section);\n    }\n    return acc;\n  }, []);\n\n  useEffect(() => {\n    onChange({ lineFilters })\n  }, [lineFilters]);\n\n  useEffect(() => {\n    onChange({ sectionFilters })\n  }, [sectionFilters]);\n\n  useEffect(() => {\n    onChange({ view })\n  }, [view]);\n\n  useEffect(() => {\n    onChange({ group })\n  }, [group]);\n\n  const handleViewChange = (event, newView) => {\n    console.log('handleViewChange', newView);\n    setView(newView);\n  }\n\n  const handleShowFiltersClick = (event) => {\n    setFilterAnchorEl(filterAnchorEl === null ? event.currentTarget : null);\n  }\n\n  const handleFilterClose = () => {\n    setFilterAnchorEl(null);\n  }\n\n  const handleGroupedChange = (event) => {\n    setGroup(event.target.value);\n  };\n\n  const handleMapsChange = event => {\n    setShowMaps(event.target.checked);\n  }\n\n  const handleLineFilterClick = filterValue => {\n    let updatedList = [...lineFilters];\n    \n    lineFilters.includes(filterValue)\n      ? updatedList = updatedList.filter((line) => line !== filterValue)\n      : updatedList.push(filterValue);\n       \n    setLineFilters(updatedList);\n    \n  }\n\n  const handleSectionFilterClick = filterValue => {\n    let updatedList = [...sectionFilters];\n    \n    sectionFilters.includes(filterValue)\n      ? updatedList = updatedList.filter((section) => section !== filterValue)\n      : updatedList.push(filterValue);\n       \n    setSectionFilters(updatedList);\n  }\n\n  return (\n    <Grid \n      container \n      spacing={1} \n      className=\"conductor-menu\" \n      direction=\"row\"\n      justify=\"space-between\"\n      alignItems=\"center\">\n      <Grid item>\n\n        <FormControl >\n          <ToggleButtonGroup \n            size=\"small\" \n            exclusive={true}\n            onChange={handleViewChange}\n            value={view}>\n            {views.map(v => (\n              <ToggleButton \n                key={v.value}\n                color=\"primary\"\n                value={v.value}>\n                  {v.shortLabel}\n              </ToggleButton>))}\n          </ToggleButtonGroup>\n        </FormControl>\n      </Grid>\n      <Grid item>\n        <FormControl >\n          <InputLabel htmlFor=\"group\">Group By</InputLabel>\n          <Select\n            native\n            size=\"small\" \n            value={group}\n            onChange={handleGroupedChange}\n            inputProps={{\n              name: 'group',\n              id: 'group',\n            }}\n          >\n            {groups.map(g => (\n              <option key={g.value} value={g.value}>{g.label}</option>\n            ))}\n          </Select>\n        </FormControl>\n      </Grid>\n      <Grid item>\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={showMaps}\n              onChange={handleMapsChange}\n              size=\"small\" \n              name=\"showMaps\"\n              color=\"primary\"\n            />\n          }\n          label=\"Show Maps\"\n        />\n      </Grid>\n      <Grid item>\n\n        <FormControl className=\"filter\">\n          {/* <IconButton color=\"primary\" onClick={handleShowFiltersClick} size=\"small\">\n            <FilterListIcon />\n          </IconButton> */}\n          <Popover \n            open={filterAnchorEl !== null}\n            anchorEl={filterAnchorEl}\n            onClose={handleFilterClose}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'right',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n          >\n            <div\n              style={{\n                padding: '0.25rem 0.5rem',\n                display: 'flex',\n                flexDirection: 'column'\n              }}>\n              {lines.map(f => (\n                <Chip \n                  clickable\n                  onClick={() => handleLineFilterClick(f)}\n                  key={f} \n                  label={`Line: ${f}`} \n                  size=\"small\"\n                  icon={<ViewModuleIcon style={{ opacity: lineFilters.includes(f) ? '1' : '0.15' }} />}\n                  variant=\"outlined\"\n                  style={{  \n                    margin: '0.25rem 0', \n                    padding: '0.25rem 0', \n                    justifyContent: 'flex-start',\n                    borderColor: linesConfig.find(l => l.lineId === f).color \n                  }}\n                />\n              ))}\n              {sections.map(f => (\n                <Chip \n                  clickable\n                  onClick={() => handleSectionFilterClick(f)}\n                  key={f} \n                  label={`Section: ${f}`} \n                  size=\"small\"\n                  icon={<ViewModuleIcon style={{ opacity: sectionFilters.includes(f) ? '1' : '0.15' }} />}\n                  variant=\"outlined\"\n                  style={{  \n                    margin: '0.25rem 0', \n                    padding: '0.25rem 0', \n                    justifyContent: 'flex-start',\n                    borderColor: sectionsConfig.find(s => s.sectionId === f).color \n                  }}\n                />\n              ))}\n            </div>\n          </Popover>\n        </FormControl>\n\n        \n      </Grid>\n      <Grid item xs={12}>\n        <Paper style={{ margin: '0.25rem' }}>\n          {lineFilters.map(f => (\n            <Chip \n              clickable\n              onClick={() => handleLineFilterClick(f)}\n              key={f} \n              label={`Line: ${f}`} \n              size=\"small\"\n              variant=\"outlined\"\n              icon={<ViewModuleIcon />}\n              style={{  \n                margin: '0.25rem', \n                padding: '0.25rem 0', \n                justifyContent: 'flex-start',\n                backgroundColor: linesConfig.find(s => s.lineId === f).color \n              }}\n            />\n          ))}\n          {sectionFilters.map(f => (\n            <Chip \n              clickable\n              onClick={() => handleSectionFilterClick(f)}\n              key={f} \n              label={`Section: ${f}`} \n              size=\"small\"\n              variant=\"outlined\"\n              icon={<ViewModuleIcon />}\n              style={{  \n                margin: '0.25rem', \n                padding: '0.25rem 0', \n                justifyContent: 'flex-start',\n                bordercClor: sectionsConfig.find(s => s.sectionId === f).color \n              }}\n            />\n          ))}\n          </Paper>\n      </Grid>\n    </Grid>\n\n  )\n};\n\nexport default ConductorMenu;","import React, { useState, useEffect, useContext } from 'react';\n\nimport Grid from '@mui/material/Grid';\nimport Container from '@mui/material/Container';\nimport Paper from '@mui/material/Paper';\n\nimport ConductorMenu from './ConductorMenu';\nimport Turnouts from '../Turnouts/Turnouts';\nimport Throttles from '../Throttles/Throttles';\nimport Effects from '../Effects/Effects';\n\nimport './Conductor.scss';\n\nexport const Conductor = props => {\n\n  const defaultMenu = window.localStorage.getItem('menu') \n    ? JSON.parse(window.localStorage.getItem('menu'))\n    : {\n      view: 'pill',\n      showMaps: true,\n      group: '',\n      lineFilters: [],\n      sectionFilters: []\n    };\n\n  const [ menu, setMenu ] = useState(defaultMenu);\n\n  useEffect(() => {\n    window.localStorage.setItem('menu', JSON.stringify(menu));\n  }, [menu])\n\n  const handleMenuChange = event => {\n    console.log('handleMenuChange', event);\n    // window.localStorage.setItem('throttleView', event.target.value);\n    setMenu({ ...menu, ...event });\n  }\n\n  const filterTurnouts = turnouts => {\n    let filtered = turnouts ? [...turnouts] : [];\n    if (menu.lineFilters && menu.lineFilters.length > 0) {\n      filtered = filtered.filter(t => menu.lineFilters.includes(t.line));\n    }\n    if (menu.sectionFilters && menu.sectionFilters.length > 0) {\n      filtered = filtered.filter(t => menu.sectionFilters.includes(t.section));\n    }\n    return filtered;\n  }\n\n  return (\n    // <Grid container className=\"conductor\" spacing={2} >\n    <Grid container\n      direction=\"row\"\n      justifyContent=\"space-between\"\n      alignItems=\"stretch\">\n      <Grid item xs={8} className=\"flex\">\n        <Throttles />\n      </Grid>\n      <Grid item xs={4}>\n          <Grid container direction=\"column\">\n            <Grid item>\n              <Paper elevation={3} style={{ padding: '0.5rem' }}>\n                <h2>Turnouts</h2>\n                {/* <ConductorMenu \n                  onChange={handleMenuChange} \n                  defaults={defaultMenu}\n                /> */}\n                <Turnouts \n                  view={menu.view}\n                  groupBy={menu.group}\n                  filter={filterTurnouts} \n                />\n              </Paper>\n            </Grid>\n            <Grid item>\n              <Paper elevation={3} style={{ padding: '0.5rem' }}>\n                <h2>Effects</h2>\n                <Effects view={menu.view} />\n              </Paper>              \n            </Grid>\n          </Grid>\n      </Grid>\n    </Grid>\n\n  )\n};\n\nexport default Conductor;","import React, { useState, useEffect, useContext } from 'react';\nimport {\n  BrowserRouter,\n  Routes,\n  Route,\n  useLocation\n} from \"react-router-dom\";\nimport Box from '@mui/material/Box';\nimport Header from './Header';\nimport Footer from './Footer';\n\n// Modules\nimport Conductor from '../Conductor/Conductor';\nimport Turnouts from '../Turnouts/Turnouts';\n// import Layout from '../Layout/Layout';\nimport Throttles from '../Throttles/Throttles';\n// import Signals from '../Signals/Signals';\nimport Effects from '../Effects/Effects';\nimport MiniThrottles from '../Throttles/MiniThrottles';\nimport LandingMenu from './LandingMenu';\n\n// Store\nimport { MenuContext, menuConfig } from '../Shared/Context/MenuContext';\nimport { Context } from '../Store/Store';\n\n// APIs\nimport { getAppConfig } from '../config/config';\nimport api, { apiStates } from '../Api';\nimport jmriApi from '../Shared/jmri/jmriApi';\n\nimport './TrackMaster.scss';\n\nfunction TrackMaster(props) {\n\n  let location = useLocation();\n\n  const appConfig = getAppConfig();\n\n  console.log('appConfig', appConfig);\n\n  const [ state, dispatch ] = useContext(Context);\n  const { signals, effects, sensors, turnouts, modules } = state;\n\n  const [page, setPage] = useState(location && location.pathname);\n  const [menu, setMenu] = useState(menuConfig);\n\n  const [jmriInitialized, setJmriInitialized] = useState(false);\n  const [sensorsInitialized, setSensorsInitialized] = useState(false);\n  const [jmriReady, setJmriReady] = useState(false);\n  const [apiReady, setApiReady] = useState(false);\n\n\n  useEffect(() => {\n    const initialize = async function() {\n      try {\n        const apiInitState = await api.initialize();\n        console.log('apiInitState', apiInitState);\n        await dispatch({ type: 'INIT_STATE', payload: apiInitState });\n        setApiReady(true);\n      } catch (err) {\n        console.error('api initialization error', err);\n      }\n    };\n    \n    initialize();\n  }, []);\n\n  // Initialize JMRI Websocket connection\n  useEffect(() => {\n    const initJmri = async () => {\n      jmriApi.on('ready', 'TrackMaster', handleJmriReady.bind(this));\n      const isSetup = await jmriApi.setup(appConfig.jmri);\n      setJmriInitialized(isSetup);\n    }\n    if (!jmriInitialized) {\n      initJmri();\n    }\n  }, [jmriInitialized]);\n\n\n  useEffect(() => {\n    if (!sensorsInitialized && jmriReady && sensors && sensors.length > 0) {\n      console.log('watchSensors', sensors);\n      jmriApi.watchSensors([...sensors]);\n      jmriApi.on('sensor', 'TrackMaster', handleSensor);\n      setSensorsInitialized(true);\n    }\n  }, [jmriApi, jmriReady, sensorsInitialized, sensors]);\n\n\n  // Event Handlers\n  const handleJmriReady = isReady => {\n    setJmriReady(isReady);\n  }\n\n  const handleSensor = ({ name, inverted, state }) =>{\n    const setSignal = (action, actionState) => {\n      if (actionState === 4) {\n        api.signals.put({ \n          signalId: action.signalId, \n          state: actionState === 4 ? 1 :0 \n        });\n      }\n      return action;\n    }\n    const sensor = sensors.find(sensor => sensor.pin == parseInt(name.substring(2)));\n    sensor.HIGH.map(sensorAction => setSignal(sensorAction, state));\n    sensor.LOW.map(sensorAction => setSignal(sensorAction, state));\n  }\n\n  // const handleNavigate = (event, newValue) => {\n  //   setPage(newValue);\n  //   history.push(newValue);\n  // }\n\n  const handleMenuClick = menuChange => {\n    const m = {...menu, ...menuChange};\n    setMenu(m);\n  }\n\n  const getRoutedModule = module => {\n    switch(module) {\n      // case 'map' :\n      //   return (\n      //     <Route path=\"/map\" key={module} element={\n      //       <Layout turnouts={turnouts} />\n      //     } />\n      //   );\n      case 'locos' :\n        return (\n          <Route path=\"/throttles\" key={module} element={\n            <Throttles jmriApi={jmriApi} />\n          } />\n        );\n      case 'turnouts' :\n        return (\n          <Route path=\"/turnouts\" key={module} element={\n            <Turnouts />\n          } />\n        );\n      // case 'signals' :\n      //   return (\n      //     <Route path=\"/signals\" key={module} element={\n      //       <Signals signals={signals} sensors={sensors} />\n      //     } />\n      //   )\n      case 'effects' :\n        return (\n          <Route path=\"/effects\" key={module} element={\n            <Effects />\n          } />\n        )\n    }\n    // TODO: add signals\n  }\n\n  return (\n    <MenuContext.Provider value={menu}>\n        <Box display=\"flex\" flexDirection=\"column\" height=\"100%\">\n          <Box>\n            <Header \n              page={page} \n              handleMenuClick={handleMenuClick} \n              jmriApi={jmriApi}\n              jmriReady={jmriReady}\n              apiReady={apiReady}\n            />\n            {/* {page !== '/conductor' && <MiniThrottles showSto={true} locos={state.locos.filter(loco => loco.isAcquired && (loco.speed !== 0 || loco.isPinned))} jmriApi={jmriApi} />} */}\n            \n          </Box>\n          <Box flexGrow={1} display=\"flex\" width=\"100%\" height=\"100%\" alignContent=\"center\" className=\"App-content\" mt={1}>\n            <Routes>\n              {/* <Route path=\"/\" exact element={<div>conductor</div>} /> */}\n              <Route path=\"/\" exact element={<Conductor />} />\n              <Route path=\"/conductor\" key={module} element={\n                <Conductor />\n              } />\n              {modules && modules.map(getRoutedModule)}\n            </Routes>\n          </Box>\n          <Box mt={1}>\n\n            <Footer page={page} modules={modules} />\n\n          </Box>\n        </Box>\n      </MenuContext.Provider>\n  );\n}\n\nexport default TrackMaster;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport TrainIcon from '@mui/icons-material/Train';\nimport navConfig from '../Shared/Config/navConfig';\n\nexport const Footer = props => {\n\n  const { page, modules, onNavigate: handleNavigate } = props;\n\n  return (\n    <BottomNavigation\n      value={page}\n      className=\"App-footer\"\n    >\n      <BottomNavigationAction \n        label=\"Conductor\" \n        value=\"/\" \n        to=\"/\" \n        icon={<TrainIcon />} \n        component={Link} \n      />\n      {modules && modules.filter(module => !!navConfig[module]).map(module => (\n        <BottomNavigationAction \n          key={module} \n          label={navConfig[module].link} \n          value={`${navConfig[module].link}`} \n          to={`${navConfig[module].link}`} \n          icon={navConfig[module].icon} \n          component={Link} \n        />\n      ))}\n    </BottomNavigation>\n  );\n\n}\n\nexport default Footer;","import React, { useState, useEffect } from 'react';\nimport Button from '@mui/material/Button';\nimport Hidden from '@mui/material/Hidden';\nimport PowerSettingsNewIcon from '@mui/icons-material/PowerSettingsNew';\n\nconst powerStates = {\n  unknown: 0, \n  on: 2, \n  off: 4\n};\n\nexport const Power = props => {\n\n  const { jmriApi, jmriReady } = props;\n\n  const [ powerStatus, setPowerStatus ] = useState(powerStates.unknown);\n  const [ initialized, setInitialized ] = useState(false);\n\n  useEffect(() => {\n    if (jmriReady && !initialized) {\n      jmriApi.on('power', 'Power', handlePowerStateChange);\n      jmriApi.power();\n      setInitialized(true);\n    }\n  }, [ initialized, jmriReady, jmriApi ]);\n\n  const handlePowerStateChange = state => {\n    setPowerStatus(state);\n  }\n\n  const handlePowerClick = () => {\n    if (powerStatus === powerStates.unknown || powerStatus === powerStates.off) {\n      jmriApi.power(powerStates.on);\n    } else if (powerStatus === powerStates.on) {\n      jmriApi.power(powerStates.off);\n    }\n  }\n\n  const getCurrentStateKey = () => {\n    const currState = Object.keys(powerStates)\n      .filter(key => powerStates[key] === powerStatus);\n    return currState.length ? currState[0] : 'unknown';\n  }\n\n  const getClassName = () => jmriApi.getState().ready && initialized\n      ? `power-${getCurrentStateKey()}`\n      : 'power-pending';\n\n  return (\n    <Button\n      onClick={handlePowerClick} \n      className={getClassName()}\n      variant=\"contained\"\n      color=\"primary\"\n      startIcon={<PowerSettingsNewIcon />}\n    >\n      <Hidden smDown>Power</Hidden>\n    </Button>)\n}\n\nexport default Power;","import React, { useState, useEffect } from 'react';\nimport Chip from '@mui/material/Chip';\nimport CallSplit from '@mui/icons-material/CallSplit';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Dialog from '@mui/material/Dialog';\nimport TextField from '@mui/material/TextField';\nimport SaveIcon from '@mui/icons-material/Save';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport UnfoldMoreIcon from '@mui/icons-material/UnfoldMore';\nimport MapIcon from '@mui/icons-material/Map';\nimport IconButton from '@mui/material/IconButton';\nimport Tooltip from '@mui/material/Tooltip';\nimport { getAppConfig, jmriHosts, apiHosts, layoutIds, updateConfig } from '../config/config';\n\nexport const StatusMonitor = ({ jmriReady,  apiReady }) => {\n\n  const appConfig = getAppConfig();\n\n  const [jmriConfigOpen, setJMRIConfigOpen] = useState(false);\n  const [apiConfigOpen, setAPIConfigOpen] = useState(false);\n  const [layoutConfigOpen, setLayoutConfigOpen] = useState(false);\n\n  const [jmriHost, setJMRIHost] = useState(appConfig.jmri);\n  const [apiHost, setAPIHost] = useState(appConfig.api);\n  const [layoutId, setLayoutId] = useState(appConfig.layoutId);\n\n  const handleJMRIUpdate = () => {\n    appConfig.jmri = jmriHost;\n    updateConfig(appConfig);\n    window.location.reload(false);\n  }\n\n  const handleAPIUpdate = () => {\n    appConfig.api = apiHost;\n    updateConfig(appConfig);\n    window.location.reload(false);\n  }\n\n  const handleLayoutUpdate = () => {\n    appConfig.layoutId = layoutId;\n    updateConfig(appConfig);\n    window.location.reload(false);\n  }\n\n  const hasJmri = !!appConfig.jmri;\n  const hasApi = !!appConfig.api;\n\n  const jmriClassName = `status-monitor--${\n    hasJmri && jmriReady\n      ? 'connected'\n      : 'unknown'\n    }`;\n\n  const apiClassName = `status-monitor--${\n    hasApi && apiReady\n      ? 'connected'\n      : 'unknown'\n    }`;\n\n  // TODO: handle jmlri disconnected\n  // TODO: handle api error\n\n  return (\n    <div className=\"status-monitor\">\n      <Tooltip title=\"Layout ID\">\n        <Chip\n          variant=\"outlined\"\n          size=\"small\"\n          icon={<MapIcon className={apiClassName} />}\n          label={`Layout ID: ${appConfig.layoutId}`}\n          color=\"default\"\n          onClick={() => setLayoutConfigOpen(true)}\n        />\n      </Tooltip>\n      <Tooltip title=\"JMRI Connection Status\">\n        <Chip\n          variant=\"outlined\"\n          size=\"small\"\n          icon={<UnfoldMoreIcon className={jmriClassName} />}\n          label=\"JMRI\"\n          color=\"default\"\n          onClick={() => setJMRIConfigOpen(true)}\n        />\n      </Tooltip>\n      <Tooltip title=\"REST API Status\">\n        <Chip\n          variant=\"outlined\"\n          size=\"small\"\n          icon={<CallSplit className={apiClassName} />}\n          label=\"API\"\n          color=\"default\"\n          onClick={() => setAPIConfigOpen(true)}\n        />\n      </Tooltip>\n\n      <Dialog onClose={() => setLayoutConfigOpen(false)} open={layoutConfigOpen}>\n        <DialogTitle>Layout ID</DialogTitle>\n        <Autocomplete\n            sx={{ padding: '1rem', width: '360px' }}\n            id=\"layout-id\"\n            freeSolo\n            onChange={(event, newValue) => {\n              setLayoutId(newValue);\n            }}\n            options={layoutIds}\n            value={layoutId}\n            renderInput={(params) => <TextField {...params} label=\"Layout ID\" />}\n          />\n          <IconButton \n            size=\"large\" \n            onClick={handleLayoutUpdate}>\n              <SaveIcon />\n          </IconButton>\n      </Dialog>\n\n      <Dialog onClose={() => setAPIConfigOpen(false)} open={apiConfigOpen}>\n        <DialogTitle>API Host</DialogTitle>\n        <Autocomplete\n            sx={{ padding: '1rem', width: '360px' }}\n            id=\"api-host\"\n            freeSolo\n            onChange={(event, newValue) => {\n              setAPIHost(newValue);\n            }}\n            options={apiHosts}\n            value={apiHost}\n            renderInput={(params) => <TextField {...params} label=\"API Host\" />}\n          />\n          <IconButton \n            size=\"large\" \n            onClick={handleAPIUpdate}>\n              <SaveIcon />\n          </IconButton>\n      </Dialog>\n\n      <Dialog onClose={() => setJMRIConfigOpen(false)} open={jmriConfigOpen}>\n        <DialogTitle>JMRI Host</DialogTitle>\n        <Autocomplete\n            sx={{ padding: '1rem', width: '360px' }}\n            id=\"jmri-host\"\n            freeSolo\n            onChange={(event, newValue) => {\n              setJMRIHost(newValue);\n            }}\n            options={jmriHosts}\n            value={jmriHost}\n            renderInput={(params) => <TextField {...params} label=\"JMRI Host\" />}\n          />\n          <IconButton \n            size=\"large\" \n            onClick={handleJMRIUpdate}>\n              <SaveIcon />\n          </IconButton>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default StatusMonitor;","import React, { useState } from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Power from './Power';\nimport StatusMonitor from './StatusMonitor';\nimport { getByLink } from '../Shared/Config/navConfig';\n\nexport const Header = props => {\n\n  const { \n    page, \n    jmriApi, \n    jmriReady, \n    apiReady,\n    onSSLAuth: handleSSLAuth \n  } = props;\n\n  const [ anchorEl, setAnchorEl ] = useState(null);\n  const [ menu, setMenu ] = useState(null);\n  const navItem = getByLink(page);\n\n  const handleClose = () => {\n    setMenu(null);\n  };\n\n  return (\n    <AppBar position=\"sticky\">\n      <Toolbar>\n        <Typography variant=\"h6\" className=\"title\">\n          {navItem ? navItem.label : '[unknown]'}\n        </Typography>\n        <StatusMonitor jmriReady={jmriReady} apiReady={apiReady} />\n\n        <Power jmriApi={jmriApi} jmriReady={jmriReady} />\n      </Toolbar>\n      <Menu\n        id=\"menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={!!menu}\n        onClose={handleClose}\n      >\n        <MenuItem onClick={handleSSLAuth}>View API Host</MenuItem>\n      </Menu>\n    </AppBar>\n  );\n\n}\n\nexport default Header;","import api from '../Api';\n\nconst Reducer = (state, action) => {\n  switch(action.type) {\n\n    case 'INIT_STATE':\n      return {...state, ...action.payload };\n\n    case 'UPDATE_LOCO':\n      const locos = state.locos.map(loco => \n        loco.address == action.payload.address\n          ? { ...loco, ...action.payload }\n          : loco\n      );\n      console.log('UPDATE_LOCO', locos, action);\n      return {\n        ...state,\n        locos\n      };\n\n    case 'UPDATE_TURNOUTS':\n      return {\n        ...state,\n        turnouts: action.payload\n      };\n\n    case 'UPDATE_TURNOUT':\n      const turnouts = state.turnouts.map(turnout => \n        turnout.turnoutId === action.payload.turnoutId\n          ? { ...turnout, ...action.payload }\n          : turnout\n      );\n      return {\n        ...state,\n        turnouts\n      };\n\n    case 'UPDATE_EFFECTS':\n      return {\n        ...state,\n        effects: action.payload\n      };\n\n    case 'UPDATE_EFFECT':\n      const effects = state.effects.map(effect => \n        effect.effectId === action.payload.effectId\n          ? { ...effect, ...action.payload }\n          : effect\n      );\n      return {\n        ...state,\n        effects\n      };\n\n    case 'UPDATE_SIGNALS':\n      return {\n        ...state,\n        signals: action.payload\n      };\n\n    case 'UPDATE_SENSORS':\n      return {\n        ...state,\n        sensors: action.payload\n      };\n\n    default:\n      console.warn('REDUCER NOT FOUND: ', action);\n      return state;    \n  }\n}\n\nexport default Reducer;\n","import { apiStates } from '../Api';\n\nexport const initialState = {\n  layout: null,\n  userPreferences: {}\n};\n\nexport default initialState;\n","import React, { createContext, useReducer } from 'react';\nimport Reducer from './Reducer';\nimport initialState from './initialState';\n\nconst Store=({children})=>{\n  const [ state, dispatch ] = useReducer(Reducer, initialState);\n  return (\n    <Context.Provider value={[state, dispatch]}>\n      {children}\n    </Context.Provider>\n  )\n}\n\nexport const Context = createContext(initialState);\n\nexport default Store;\n","import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport Grid from '@mui/material/Grid';\n// import CallSplit from '@mui/icons-material/CallSplit';\nimport MapIcon from '@mui/icons-material/Map';\nimport UnfoldMoreIcon from '@mui/icons-material/UnfoldMore';\n// import SettingsIcon from '@mui/icons-material/Settings';\nimport TrainIcon from '@mui/icons-material/Train';\nimport navConfig from '../Shared/Config/navConfig';\n\n\nfunction LandingMenu({ modules, onNavigate }) {\n\n  const handleClick = (e, module) => {\n    onNavigate(e, navConfig[module].link)\n  }\n\n  const getdModuleLink = module => {\n\n    let moduleLink;\n  \n    switch(module) {\n      case 'map' :\n        moduleLink = (\n          <>\n            Map \n            <MapIcon />\n          </>\n        );\n        break;\n      case 'throttles' :\n        moduleLink = (\n          <>\n            Throttles \n            <UnfoldMoreIcon />\n          </>\n        );\n        break;\n      case 'conductor' :\n        moduleLink = (\n          <>\n            Conductor \n            <TrainIcon />\n          </>\n        );\n        break;\n      case 'turnouts' :\n        moduleLink = (\n          <>\n            Turnouts \n            <TrainIcon />\n          </>\n        );\n        break;\n    }\n    return (\n      <Grid item xs={6} className=\"trackmaster__menu-item\" key={module}>\n        <Link to={`module.link`}>\n          {moduleLink}\n        </Link>\n      </Grid>\n    );\n\n    \n  }\n\n  return (\n    <Grid container spacing={8}>\n\n      {modules.filter(module => !!navConfig[module]).map(getdModuleLink)}\n      \n    </Grid>\n  )\n\n}\n\nexport default LandingMenu;","import { createTheme, ThemeProvider, styled } from '@mui/material/styles';\nimport * as Colors from '@mui/material/colors';\n\nconst theme = createTheme({\n  typography: {\n    useNextVariants: true,\n  },\n  palette: {\n    mode: 'dark',\n    primary: Colors.red,\n    secondary: Colors.lightGreen\n  },\n  background: {\n    default: Colors.grey[900]\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport TrackMaster from './TrackMaster/TrackMaster';\nimport { ThemeProvider as MuiThemeProvider } from '@mui/material/styles';\nimport Store from './Store/Store';\nimport { BrowserRouter } from \"react-router-dom\";\nimport theme from './theme';\nimport './App.scss';\n\nfunction App() {\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <Store>\n        <CssBaseline />\n        <BrowserRouter>\n          <TrackMaster />\n        </BrowserRouter>\n      </Store>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export default __webpack_public_path__ + \"static/media/IDAWANY-blueline.863dee50.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-brownline.c1a67e89.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-greenline.c38192f4.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-magentaline.0ab0069c.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-orangeline.6ba8564b.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-purpleline.f7659374.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-redline.8ce94a81.png\";","export default __webpack_public_path__ + \"static/media/IDAWANY-yellowline.b7295c95.png\";","import * as Colors from '@mui/material/colors';\nimport blueLineImg from './Layout/images/IDAWANY-blueline.png';\nimport brownLineImg from './Layout/images/IDAWANY-brownline.png';\nimport greenLineImg from './Layout/images/IDAWANY-greenline.png';\nimport magentaLineImg from './Layout/images/IDAWANY-magentaline.png';\nimport orangeLineImg from './Layout/images/IDAWANY-orangeline.png';\nimport purpleLineImg from './Layout/images/IDAWANY-purpleline.png';\nimport redLineImg from './Layout/images/IDAWANY-redline.png';\nimport yellowLineImg from './Layout/images/IDAWANY-yellowline.png';\n// import { getApi as getApiHostName, getConfig } from './config/config';\nimport { getAppConfig } from './config/config';\n\nconst appConfig = getAppConfig();\n\nexport const linesConfig = [\n  { name: 'Red', color: Colors.red[500], img: redLineImg },\n  { name: 'Green', color: Colors.green[500], img: greenLineImg },\n  { name: 'Magenta', color: Colors.pink[500], img: magentaLineImg },\n  { name: 'Yellow', color: Colors.yellow[500], img: yellowLineImg },\n  { name: 'Orange', color: Colors.orange[500], img: orangeLineImg },\n  { name: 'Blue', color: Colors.blue[500], img: blueLineImg },\n  { name: 'Brown', color: Colors.brown[500], img: brownLineImg },\n  { name: 'Purple', color: Colors.purple[500], img: purpleLineImg }\n];\n\nconst locoDefaults = {\n  isAcquired: false,\n  cruiseControl: false,\n  autoStop: true,\n  maxSpeed: 100,\n  speed: 0,\n  forward: null\n};\n\n// const appConfig = getConfig();\n// let apiHost = getApiHostName();\n\nasync function get(type = null, Id = null) {\n  try {\n    const response = type !== null\n      ? Id !== null\n        ? await fetch(`${appConfig.api}/${type}s/${Id}`)\n        : await fetch(`${appConfig.api}/${type}s`)\n      : await fetch(`${appConfig.api}/`);\n    return response.json();\n  } catch (err) {\n    console.error(err);\n    throw new Error('Unable to read', type, `Id=${Id}`);\n  }\n}\n\nasync function initialize() {\n  const layoutConfig = await api.get();\n  console.log('appConfig', appConfig);\n  console.log('layoutConfig', layoutConfig);\n  const getModules = layoutConfig.modules.reduce((reqs, module) => api[module] && api[module].get ? [...reqs, module] : [...reqs], []);\n  console.log('getModules', getModules, layoutConfig.modules);\n  const results = await Promise.all(\n    getModules.map(req => api[req].get()\n      .then(resp => api[req].initialize ? api[req].initialize(resp) : resp))\n  );\n  const initialState = getModules.reduce((state, module, index) => ({ \n    ...state, \n    [module]: results[index] \n  }), { modules: layoutConfig.modules });\n  console.log('initialState', initialState);\n  return initialState;\n}\n\nasync function put(type, data, idField) {\n  try {\n    const id = idField ? data[idField] : data[`${type}Id`];\n    const response = await fetch(`${appConfig.api}/${type}s/${id}`, {\n      method: 'PUT',\n      cache: 'no-cache',\n      crossDomain: true,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n    return await response.json();\n  } catch (err) {\n    console.error(err)\n    throw new Error('Unable to update', type, data);\n  }\n}\n\nfunction initializeLocos(locos) {\n  return locos.map(loco => ({ ...locoDefaults, ...loco }));\n}\n\nexport const apiStates = {\n  idle: 'idle',\n  pending: 'pending',\n  done: 'done',\n  error: 'error'\n}\n\nexport const api = {\n  initialize,\n  get,\n  put,\n  turnouts: {\n    get: args => get('turnout', args),\n    put: args => put('turnout', args)\n  },\n  // signals: {\n  //   get: args => get('signal', args),\n  //   put: args => put('signal', args)\n  // },\n  effects: {\n    get: args => get('effect', args),\n    put: args => put('effect', args)\n  },\n  locos: {\n    get: args => get('loco', args, 'address'),\n    put: args => put('loco', args, 'address'),\n    initialize: initializeLocos\n  },\n  sensors: {\n    get: args => get('sensor', args)\n  }\n}\n\nexport default api;\n","import * as Colors from '@mui/material/colors';\n\nconst storageKey = 'lcConfig';\n\nexport const getAppConfig = () => {\n    try {\n        let config = getlocalStorageConfig();\n        return config\n            ? config\n            : require('./config.local.json');\n    } catch (e) {\n        console.warn('Loading default config');\n        return require('./config.default.json');\n    }\n}\n\nexport const jmriHosts = [\n    'http://tamarackpi:12080/json/',\n    'http://traincontrol:12080/json/',\n    'http://localhost:12080/json/'\n];\n\nexport const apiHosts = [\n    'http://tamarackpi:5000',\n    'http://traincontrol:5000',\n    'http://localhost:5000'\n];\n\nexport const layoutIds = [\n    'tam',\n    'traincontrol',\n    'betatrack'\n];\n\nexport const updateConfig = newConfig =>\n    window.localStorage.setItem(storageKey, JSON.stringify(newConfig));\n\nconst getlocalStorageConfig = () => {\n    const config = window.localStorage.getItem(storageKey);\n    return config ? JSON.parse(config) : null;\n}\n\nconst defaultColor = Colors.grey[500];\n\nexport const linesConfig = [\n    { lineId: 'Mainline Red', color: Colors.red[500] },\n    { lineId: 'Mainline Green', color: Colors.green[500] },\n    { lineId: 'Tamarack Station', color: Colors.cyan[500] }\n];\n  \nexport const sectionsConfig = [\n    { sectionId: 'Tamarack South', color: Colors.blueGrey[500] },\n    { sectionId: 'Tamarack North', color: Colors.purple[500] },\n    { sectionId: 'Tamarack Plaza', color: Colors.teal[500] },\n    { sectionId: 'City North', color: Colors.orange[500] }\n];\n  \nexport const effectsConfig = [\n    { effectId: 'Light', color: Colors.red[500] },\n    { effectId: 'Lighting Animation', color: Colors.amber[500] },\n    { effectId: 'Sound Loop', color: Colors.teal[500] },\n    { effectId: 'Sound', color: Colors.indigo[500] },\n    { effectId: 'Signal', color: Colors.green[500] }\n];\n\nexport const getSectionColor = sectionId => {\n    const section = sectionsConfig.find(s => s.sectionId === sectionId);\n    return section ? section.color : defaultColor;\n}\n\nexport const getLineColor = lineId => {\n    const line = linesConfig.find(s => s.lineId === lineId);\n    return line ? line.color : defaultColor;\n}\n\nexport const getEffectColor = effectId => {\n    const effect = effectsConfig.find(s => s.effectId === effectId);\n    return effect ? effect.color : defaultColor;\n}\n\nexport default getAppConfig;","let isSetup = false;\nlet isReady = false;\nvar $jmri = null;\nvar $debug = false;\nvar $ = window.jQuery;\nvar log = new window.Logger();\nvar sensros = [];\nvar promises = {\n\tspeed: {\n\t\tresolve: () => {},\n\t\treject: () => {}\n\t},\n\tdirection: {\n\t\tresolve: () => {},\n\t\treject: () => {}\n\t},\n\tacquire: {\n\t\tresolve: () => {},\n\t\treject: () => {}\n  },\n\trelease: {\n\t\tresolve: () => {},\n\t\treject: () => {}\n  },\n  power: {\n    resolve: () => {},\n\t\treject: () => {}\n  },\n  ready: {\n    resolve: () => {},\n\t\treject: () => {}\n  },\n\tsetup: {\n\t\tresolve: () => {},\n\t\treject: () => {}\n\t}\n}\n \nwindow.onerror = function(errMsg, errUrl, errLineNumber) {\n\tif ($jmri) $jmri.closeSocket();\n\tconsole.error('\\nError running javascript:\\n' + errMsg + '\\n\\nURL:\\n' + errUrl + '\\n\\nLine Number: ' + errLineNumber);\n\treturn true;\n};\n\nwindow.onunload = function() {\n\tif ($jmri) {\n\t\t// $jmri.setJMRI('throttle', $locoAddress, {\"release\":null});\n\t\t$jmri.closeSocket();\n\t}\n};\n\nvar jmriLostComm = function(message) {\n    console.log('Communication lost.', message);\n};\n\nvar jmriReady = function(jsonVersion, jmriVersion, railroadName) {\n\tconsole.log('__jmriReady', jsonVersion, jmriVersion, railroadName);\n\tisReady = true;\n  fireEvent('ready', isReady);\n}\n\n//----------------------------------------- [from server] Last selected throttle address\nvar throttleState = function(name, address, speed, forward, fs) {\n\tconsole.log('__throttleState', name, address, speed, forward, fs, arguments);\n\tif (name !== undefined \n\t\t&& typeof address === 'undefined' \n\t\t&& typeof speed === 'undefined' \n\t\t&& typeof forward === 'undefined') {\n\t\t\tthrottleRelease(name);\n\t\t\treturn;\n\t}\n\tif (address !== undefined) throttleAcquisition(address);\n\tif (forward !== undefined) throttleDirection(name, forward);\n\tif (speed !== undefined) throttleSpeed(name, speed);\n\tfor (var i = 0; i < 29; i++) if (fs[i] !== undefined) throttleFunctionState(name, i, fs[i]);\n};\n\n//----------------------------------------- [from server] Last selected throttle address\nvar sensorState = function(name, userName, comment, inverted, state) {\n\tconsole.log('__sensorState', name, userName, comment, inverted, state);\n\tfireEvent('sensor', { name, inverted, state });\n};\n\nconst throttleAcquisition = address => {\n    console.log('__throttleAcquisition', address);\n    fireEvent('acquire', address);\n}\n\nconst throttleRelease = address => {\n    console.log('__throttleRelease', address);\n    fireEvent('release', address);\n}\n\nconst throttleDirection = function(name, forward) {\n\t\tconsole.log('__throttleDirection', name, forward);\n\t\tfireEvent('direction', { name, forward });\n}\n\nconst throttleSpeed = function(name, speed) {\n    console.log('__throttleSpeed', name, speed);\n\t\tfireEvent('speed', { name, speed });\n};\n\nconst throttleFunctionState = function(name, functionNumber, active) {\n    // console.log('__throttleFunctionState', name, functionNumber, active);\n};\n\nconst layoutPowerState = function(state) {\n    console.log('__layoutPowerState', state, eventHandlers);\n    fireEvent('power', state);\n};\n\nconst setup = (apiHost) => {\n\t\tif (isSetup) {\n\t\t\tconsole.log('throttle API already setup');\n\t\t\treturn isSetup;\n\t\t}\n    // const apiHost = 'ws://tamarackpi:12080/json/';\n    // const apiHost = 'ws://localhost:12080/json/';\n    $jmri = $.JMRI(apiHost, {\n\t\t//*** Callback Functions available in '$jmri' object\n\t\ttoSend: function(data) {$debug && log.log(`${new Date()} - ${document.title}\\nJSONtoSend: ${data}`);},\t//Nothing to do\n\t\tfullData: function(data) {$debug && log.log(`${new Date()} - ${document.title}\\nJSONreceived: ${data}`);},\t//Nothing to do\n                error: function (code, message) {\n                    if (code === 0)\n                        jmriLostComm(message);\n                    else if (code === 200)\n                        console.log(message);\n                    else\n                        console.log('Error: ' + code + ' - ' + message);\n                },\n\t\tend: function() {jmriLostComm('The JMRI WebSocket service was turned off.\\nSolve the problem and refresh web page.');},\n\t\tready: function(jsonVersion, jmriVersion, railroadName) {jmriReady(jsonVersion, jmriVersion, railroadName);},\t//When WebSocket connection established - continue next steps\n\t\tthrottle: function(name, address, speed, forward, fs) {throttleState(name, address, speed, forward, fs);},\n\t\tlight: function(name, userName, comment, state) {},\t//Nothing to do\n\t\treporter: function(name, userName, state, comment, report, lastReport) {},\t//Nothing to do\n\t\tsensor: function(name, userName, comment, inverted, state) {sensorState(name, userName, comment, inverted, state)},\t//Nothing to do\n\t\t// turnout: function(name, userName, comment, inverted, state) {layoutTurnoutState(name, userName, comment, inverted, state);},\n\t\tsignalHead: function(name, userName, comment, lit, appearance, held, state, appearanceName) {},\t//Nothing to do\n\t\tsignalMast: function(name, userName, aspect, lit, held, state) {},\t//Nothing to do\n\t\t// route: function(name, userName, comment, state) {layoutRouteState(name, userName, comment, state);},\n\t\tmemory: function(name, userName, comment, value) {},\t//Nothing to do\n\t\tpower: function(state) {layoutPowerState(state);},\n\t});\n\tif (!$jmri) throw new Error('private~Could not open JMRI WebSocket.');\n\tisSetup = true;\n\t// setTimeout(() => {\n\t// \t$jmri.getJMRI('sensor', 'DS25');\n\t// }, 5000);\n\treturn createPromise('ready');\n}\n\nconst watchSensors = sensors => {\n\tsensors.forEach(sensor => $jmri.getJMRI('sensor', `DS${sensor.pin}`));\n}\n\nconst throttle = async (address, speed) => {\n    const speedValue = speed / 100;\n    var speedValueFormated = '' + speedValue;\n\tif (speedValue === 0) speedValueFormated = $jmri.STOP;\n\tif (speedValue === 1) speedValueFormated = $jmri.FULL_SPEED;\n\tvalidateCommand() && $jmri.setJMRI('throttle', address, { \n\t\taddress,\n\t\t'speed': speedValueFormated\n\t});\n\treturn createPromise('speed', 'New throttle action dispatched.');\n}\n\nconst changeDirection = (address, forward) => {\n    validateCommand() && $jmri.setJMRI('throttle', address, { \n\t\t\taddress, \n\t\tforward: !!forward\n\t });\n\t return createPromise('direction', 'New direction action dispatched.');\n}\n\nconst requestLoco = async address => {\n\tvalidateCommand(promises.acquire.reject) && $jmri.setJMRI('throttle', address, { \n        throttle: address,\n        address\n\t});\n\treturn createPromise('acquire', 'New loco request action dispatched.');\n}\n\nconst releaseLoco = async address => {\n\tconsole.log('releaseLoco', address);\n\tvalidateCommand(promises.release.reject) && $jmri.setJMRI('throttle', address, { release: null });\n\treturn createPromise('release', 'New loco release action dispatched.');\n}\n\nconst power = async state => {\n  const payload = state\n    ? { state: state }\n    : {}\n  validateCommand(promises.power.reject) && $jmri.setJMRI('power', null, payload);\n  return createPromise('power', 'New power action dispatched.');\n}\n\nconst getState = () =>{\n  return {\n    setup: isSetup,\n    ready: isReady\n  }\n}\n\nconst eventHandlers = {};\n\nconst attachEvent = (type, src, callback) => {\n\tif (!eventHandlers[type]) {\n\t\teventHandlers[type] = {};\n\t}\n\teventHandlers[type][src] = callback;\n}\n\nconst dettachEvent = (type, src) => {\n  if (eventHandlers[type] && eventHandlers[type][src]) {\n\t\tdelete eventHandlers[type][src];\n\t}\n}\n\nconst fireEvent = (type, payload) => {\n  if (promises[type]) {\n    promises[type].resolve(payload);\n  }\n  if (eventHandlers[type]) {\n\t\tconsole.log('fireevent', type, eventHandlers[type]);\n\t\tObject.keys(eventHandlers[type]).forEach(key => {\n\t\t\teventHandlers[type][key](payload);\n\t\t});\n  }\n}\n\nconst createPromise = (obj, rejectMsg) => {\n  if (rejectMsg && promises[obj]) {\n    promises[obj].reject(rejectMsg);\n  }\n\tconst promise = new Promise((resolve, reject) => {\n\t\tpromises[obj].resolve = resolve;\n\t\tpromises[obj].reject = reject;\n\t});\n\treturn promise;\n}\n\nconst validateCommand = reject => {\n\tlet errorMessage;\n\tif (!isSetup) {\n\t\terrorMessage =  'Setup not called';\n    } else if (!isReady) {\n      // debugger;\n\t\terrorMessage =  'Comm not ready';\n\t}\n\tif (errorMessage) {\n\t\tconsole.error(errorMessage);\n\t\tif (reject) {\n\t\t\treject(errorMessage)\n\t\t}\n\t\treturn false;\n\t} else { \n\t\treturn true;\n\t}\n}\n    \nexport const jmriApi = {\n    setup, \n    throttle,\n\t\trequestLoco,\n\t\treleaseLoco,\n\t\twatchSensors,\n    changeDirection,\n    power,\n\t\ton: attachEvent,\n\t\toff: dettachEvent,\n    getState\n};\n\nexport default jmriApi;","import React from 'react';\nimport CallSplit from '@mui/icons-material/CallSplit';\nimport MapIcon from '@mui/icons-material/Map';\nimport UnfoldMoreIcon from '@mui/icons-material/UnfoldMore';\nimport TrafficIcon from '@mui/icons-material/Traffic';\nimport MovieFilterIcon from '@mui/icons-material/MovieFilter';\n// import SettingsIcon from '@mui/icons-material/Settings';\nimport TrainIcon from '@mui/icons-material/Train';\n\nexport const navConfig = {\n  map: { link: '/map', label: 'Layout', icon: (<MapIcon />) },\n  conductor: { link: '/', label: 'Conductor', icon: (<TrainIcon />) },\n  turnouts: { link: '/turnouts', label: 'Turnouts', icon: (<CallSplit />) },\n  throttles: { link: '/throttles', label: 'Throttle', icon: (<UnfoldMoreIcon />) },\n  signals: { link: '/signals', label: 'Signals', icon: (<TrafficIcon />) },\n  effects: { link: '/effects', label: 'Effects', icon: (<MovieFilterIcon />) }\n}\n\nexport const getByLink = link => {\n  const item = Object.keys(navConfig).reduce(function(result, curr) {\n    if (navConfig[curr].link === link) {\n      result = navConfig[curr];\n    }\n    return result;\n  }, null);\n  return item;\n};\n\nexport default navConfig;"],"sourceRoot":""}