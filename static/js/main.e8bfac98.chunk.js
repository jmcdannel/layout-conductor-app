(this["webpackJsonplayout-conductor-app"]=this["webpackJsonplayout-conductor-app"]||[]).push([[0],{109:function(e,t,n){"use strict";n(0);var r=n(1);t.a=function(e){var t=e.speed,n=e.isDisabled,a=void 0!==n&&n;return Object(r.jsx)("div",{className:"throttle__speed \n      ".concat(a?"throttle__speed--disabled":"","\n      ").concat(t<0?"throttle__speed--reverse":"throttle__speed--forward"),children:Math.abs(parseInt(t))})}},110:function(e,t,n){"use strict";var r=n(14),a=n.n(r),c=n(18),o=n(8),i=n(0),s=n(22),l=n(1);t.a=function(e){var t=Object(i.useContext)(s.a),n=Object(o.a)(t,2),r=(n[0],n[1]),u=e.jmriApi,d=e.speed,j=e.forward,f=e.address,b=function(e){var t=e.name,n=e.speed;console.log("handleSpeed",f,t,j,n),r({type:"UPDATE_LOCO",payload:{address:t,speed:n}})},p=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,c=t.forward,console.log("handleDirection",f,n,c,d),r({type:"UPDATE_LOCO",payload:{address:n,forward:c}}),0===d){e.next=6;break}return e.next=6,u.throttle(f,Math.abs(d));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){u.on("direction","JmriThrottleController",p),u.on("speed","JmriThrottleController",b)}),[u,p,b]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d>0&&!1===j)){e.next=5;break}return e.next=3,u.changeDirection(f,!0);case 3:case 8:case 13:case 18:case 23:e.next=28;break;case 5:if(!(d<0&&!0===j)){e.next=10;break}return e.next=8,u.changeDirection(f,!1);case 10:if(!(d>0&&!0===j)){e.next=15;break}return e.next=13,u.throttle(f,Math.abs(d));case 15:if(!(d<0&&!1===j)){e.next=20;break}return e.next=18,u.throttle(f,Math.abs(d));case 20:if(0===d||null!==j){e.next=25;break}return e.next=23,u.changeDirection(f,d>0);case 25:if(0!==d||null===j){e.next=28;break}return e.next=28,u.throttle(f,Math.abs(d));case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[u,d,f,j]),Object(l.jsx)(l.Fragment,{})}},111:function(e,t,n){"use strict";var r=n(8),a=n(0);t.a=function(e,t){var n=Object(a.useState)(e),c=Object(r.a)(n,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),o}},115:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n(179),o=n(14),i=n.n(o),s=n(18),l=n(53),u=n(137);n.p;var d,j=["title","titleId"];function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){var n=e.title,r=e.titleId,c=b(e,j);return a.createElement("svg",f({viewBox:"0 0 833 159",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.5,ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,d||(d=a.createElement("g",{transform:"translate(-200 -118)"},a.createElement("path",{fill:"none",d:"M199.7 117.5H1032.4V276H199.7z"}),a.createElement("clipPath",{id:"a"},a.createElement("path",{d:"M199.7 117.5H1032.4V276H199.7z"})),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{d:"M1993.94,822.857L3146.09,549.036",fill:"none",stroke:"#333",strokeWidth:384.9,transform:"matrix(.15687 0 0 .15493 490 64)"}),a.createElement("path",{d:"M1993.94,822.857L2002.07,822.816C2002.07,822.816 2535.69,804.044 2715.58,780.319C2934.27,751.476 3370.77,651.026 3370.77,651.026",fill:"none",stroke:"#333",strokeWidth:199.3,transform:"matrix(.30272 0 0 .29932 -217 -3)"}),a.createElement("path",{d:"M1993.94,822.857L3394.61,822.857",fill:"none",stroke:"#ff00fc",strokeWidth:199.3,transform:"matrix(.30272 0 0 .29932 -218 -4)"}),a.createElement("path",{d:"M1993.94,822.857L3394.61,822.857",fill:"none",stroke:"#ff00fc",strokeWidth:385.1,transform:"matrix(.1567 0 0 .15493 497 115)"}),a.createElement("path",{d:"M1993.94,822.857L3394.61,822.857",fill:"none",stroke:"#ff00fc",strokeWidth:464.1,transform:"matrix(.13 0 0 .12854 -55 137)"})))))}var m,h=a.forwardRef(p),O=(n.p,["title","titleId"]);function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function v(e,t){var n=e.title,r=e.titleId,c=g(e,O);return a.createElement("svg",x({viewBox:"0 0 833 159",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.5,ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,m||(m=a.createElement("g",{transform:"translate(-200 -118)"},a.createElement("clipPath",{id:"a"},a.createElement("path",{d:"M199.7 117.5H1032.4V276H199.7z"})),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{d:"M1993.94,822.857L3394.61,822.857",fill:"none",stroke:"#333",strokeWidth:199.3,transform:"matrix(.30272 0 0 .29932 -218 -4)"}),a.createElement("path",{d:"M1993.94,822.857L3394.61,822.857",fill:"none",stroke:"#333",strokeWidth:385.1,transform:"matrix(.1567 0 0 .15493 497 115)"}),a.createElement("path",{d:"M1993.94,822.857L2002.07,822.816C2002.07,822.816 2535.69,804.044 2715.58,780.319C2934.27,751.476 3370.77,651.026 3370.77,651.026",fill:"none",stroke:"#ff00fc",strokeWidth:199.3,transform:"matrix(.30272 0 0 .29932 -217 -3)"}),a.createElement("path",{d:"M1993.94,822.857L3394.61,822.857",fill:"none",stroke:"#ff00fc",strokeWidth:464.1,transform:"matrix(.13 0 0 .12854 -55 137)"}),a.createElement("path",{d:"M1993.94,822.857L3146.09,549.036",fill:"none",stroke:"#ff00fc",strokeWidth:384.9,transform:"matrix(.15687 0 0 .15493 490 64)"})))))}var y=a.forwardRef(v);n.p;n.p;var k=n(124),w=n(332),E=n(347),_=n(348),C=n(352),S=n(349),I=n(350),L=n(108),N=n.n(L),A=n(166),M=n.n(A),T=n(167),P=n.n(T),D=n(248),W=n(336),R=n(341),U=n(165),z=n.n(U),J=n(164),q=n.n(J),F=n(351),B=n(324),H=n(346),G=n(315),V=n(163),Y=n.n(V),Q=n(139),X=n.n(Q),Z=n(356),K=n(327),$=n(340),ee=n(357),te=n(354),ne=n(355),re=n(308),ae=n(22),ce=n(25),oe=n(1),ie=function(e){return e<90?90-e+90:90-(e-90)},se=function(e){var t=e.open,n=e.config,o=e.onClose,l=Object(a.useContext)(ae.a),u=Object(r.a)(l,2),d=(u[0],u[1]),j=n.turnoutId,f=Object(a.useState)(n.name),b=Object(r.a)(f,2),p=b[0],m=b[1],h=Object(a.useState)(n.line),O=Object(r.a)(h,2),x=O[0],g=O[1],v=Object(a.useState)(n.straight),y=Object(r.a)(v,2),w=y[0],E=y[1],_=Object(a.useState)(n.divergent),C=Object(r.a)(_,2),S=C[0],I=C[1],L=Object(a.useState)(!1),A=Object(r.a)(L,2),M=A[0],T=A[1],P=Object(a.useState)(!0),D=Object(r.a)(P,2),U=D[0],z=D[1],J=Object(a.useState)(n.straight===ie(n.divergent)),q=Object(r.a)(J,2),F=q[0],B=(q[1],Object(a.useState)(!0)),V=Object(r.a)(B,2),Q=(V[0],V[1]),se=Object(a.useState)(!1),le=Object(r.a)(se,2),ue=(le[0],le[1]),de=function(){console.log(e),o()},je=function(e){M||(T(!0),ue(!1),pe(e).then((function(e){console.log("complete",e),Q(!1)})).catch((function(e){console.log(e),ue(!0)})).finally((function(){T(!1)})))},fe=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),ue(!1),e.next=5,ce.a.turnouts.put({turnoutId:j,name:p,line:x,straight:w,divergent:S});case 5:return t=e.sent,e.next=8,d({type:"UPDATE_TURNOUT",payload:t});case 8:o(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),ue(!0);case 15:return e.prev=15,T(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})));return function(){return e.apply(this,arguments)}}(),be=function(e){return!0},pe=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.turnouts.put({turnoutId:j,current:parseInt(t)});case 2:return n=e.sent,e.next=5,d({type:"UPDATE_TURNOUT",payload:n});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(oe.jsxs)($.a,{open:t,onClose:de,maxWidth:"md","aria-labelledby":"form-dialog-title",children:[Object(oe.jsx)(re.a,{id:"form-dialog-title",children:"Turnout Settings"}),Object(oe.jsx)(G.a,{}),Object(oe.jsx)(te.a,{children:Object(oe.jsxs)(k.a,{mt:1,mb:3,children:[Object(oe.jsx)(ne.a,{children:"Changes are not saved until you click save."}),Object(oe.jsxs)(c.a,{container:!0,spacing:1,children:[Object(oe.jsx)(c.a,{item:!0,xs:3,children:Object(oe.jsx)(K.a,{margin:"dense",id:"number",label:"Switch Num",size:"small",disabled:!0,value:j,InputProps:{startAdornment:Object(oe.jsx)(Z.a,{position:"start",children:Object(oe.jsx)(X.a,{})})}})}),Object(oe.jsx)(c.a,{item:!0,xs:3,children:Object(oe.jsx)(K.a,{margin:"dense",id:"line",label:"Line",size:"small",value:x,onChange:function(e){return g(e.target.value)}})}),Object(oe.jsx)(c.a,{item:!0,xs:6,children:Object(oe.jsx)(K.a,{fullWidth:!0,margin:"dense",id:"name",label:"Switch Name",value:p,onChange:function(e){return m(e.target.value)},InputProps:{startAdornment:Object(oe.jsx)(Z.a,{position:"start"})}})})]})]})}),Object(oe.jsx)(G.a,{}),Object(oe.jsxs)(re.a,{id:"form-servo-title",children:[!U&&Object(oe.jsx)(R.a,{"aria-label":"lock",onClick:function(){return z(!0)},children:Object(oe.jsx)(X.a,{})}),U&&Object(oe.jsx)(R.a,{"aria-label":"lock",onClick:function(){return z(!1)},children:Object(oe.jsx)(Y.a,{})}),"Configure Servo"]}),Object(oe.jsx)(te.a,{children:Object(oe.jsx)(c.a,{container:!0,spacing:1,children:Object(oe.jsxs)(c.a,{item:!0,xs:9,children:[Object(oe.jsx)(K.a,{margin:"dense",id:"straight",label:"Straight",width:"100px",disabled:U||M,value:w,onChange:function(e){var t=parseInt(e.target.value);be(t)&&(E(t),F&&I(ie(t)))}}),Object(oe.jsx)(K.a,{margin:"dense",id:"divergent",label:"Divergent",width:"100px",disabled:U||M,value:S,onChange:function(e){var t=parseInt(e.target.value);be(t)&&(I(t),F&&E(ie(t)))}}),Object(oe.jsx)(k.a,{my:1,children:Object(oe.jsxs)(H.a,{variant:"outlined",color:"primary",children:[Object(oe.jsx)(W.a,{onClick:function(){E(n.straight),I(n.divergent)},disabled:U||M,startIcon:Object(oe.jsx)(N.a,{}),children:"Reset"}),Object(oe.jsx)(W.a,{onClick:function(){return je(w)},disabled:M,children:"Straight"}),Object(oe.jsx)(W.a,{onClick:function(){return je(S)},disabled:M,children:"Divergent"}),Object(oe.jsx)(W.a,{onClick:function(){return je((w+S)/2)},disabled:M,children:"Center\xb0"})]})})]})})}),Object(oe.jsxs)(ee.a,{children:[Object(oe.jsx)(W.a,{onClick:de,children:"Cancel"}),Object(oe.jsx)(W.a,{onClick:fe,color:"primary",children:"Save"})]})]})},le=(n(154),l.a[500],{lineId:"Unknown Line",label:"Unknown Line",color:u.a[500]}),ue=function(e){var t=e.config,n=(t.type,t.current),c=t.straight,o=t.divergent,l=t.relay,u=t.servo,d=t.name,j=t.turnoutId,f=t.default,b=Object(a.useContext)(ae.a),p=Object(r.a)(b,2),m=(p[0],p[1]),O=Object(a.useState)(n===o),x=Object(r.a)(O,2),g=x[0],v=x[1],L=Object(a.useState)(!1),A=Object(r.a)(L,2),T=A[0],U=A[1],J=Object(a.useState)(!1),H=Object(r.a)(J,2),G=H[0],V=H[1],Y=Object(a.useState)(!0),Q=Object(r.a)(Y,2),X=Q[0],Z=Q[1],K=Object(a.useState)(!1),$=Object(r.a)(K,2),ee=$[0],te=$[1];Object(a.useEffect)((function(){v(n===o)}),[n,o]);var ne=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,U(!0),Z(!1),n=g?c:o,console.log("handleToggle",n,c,o,null!=u),e.next=9,ce.a.turnouts.put({turnoutId:j,current:n});case 9:return r=e.sent,e.next=12,m({type:"UPDATE_TURNOUT",payload:r});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0),V(e.t0.toString());case 18:return e.prev=18,U(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,14,18,21]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.turnouts.put({turnoutId:j,current:"straight"===f?c:o});case 2:return n=e.sent,e.next=5,m({type:"UPDATE_TURNOUT",payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(oe.jsxs)(E.a,{className:"turnout turnout--compact",children:[Object(oe.jsxs)(_.a,{className:"turnout__header",children:[Object(oe.jsx)(w.a,{label:"".concat(d),variant:"outlined",className:"chip",size:"small",style:{backgroundColor:le.color},clickable:!0,onClick:ne}),Object(oe.jsxs)(k.a,{className:"turnout__header__status",children:[T||X?Object(oe.jsx)(q.a,{style:{color:"gray"}}):Object(oe.jsx)(z.a,{style:{color:"green"}}),l&&Object(oe.jsx)(M.a,{style:{color:"green"}})]})]}),Object(oe.jsxs)(_.a,{className:"turnout__id",children:[Object(oe.jsx)(S.a,{className:"turnout__state ".concat(T?"loading":""),onClick:ne,children:Object(oe.jsxs)(I.a,{component:"div",height:"100%",title:"Turnout State",className:"media-container",children:[Object(oe.jsx)("div",{className:"svg-wrapper",children:g?Object(oe.jsx)(y,{width:"90"}):Object(oe.jsx)(h,{width:"90"})}),T&&Object(oe.jsx)(F.a,{color:"primary",className:"spinner"})]})}),Object(oe.jsxs)(k.a,{my:1,className:"turnout__desc compact-hidden",children:[Object(oe.jsx)(D.a,{component:"h6",variant:"h6",gutterBottom:!0,children:d}),Object(oe.jsxs)(D.a,{component:"small",gutterBottom:!0,children:["Angle: ",n]})]})]}),Object(oe.jsxs)(C.a,{className:"tournout__actions",children:[Object(oe.jsx)(W.a,{className:"compact-hidden",variant:"contained",color:"primary",onClick:ne,children:"Toggle"}),Object(oe.jsxs)("span",{children:[Object(oe.jsx)(R.a,{variant:"outlined",onClick:re,color:"primary",disabled:T,children:Object(oe.jsx)(N.a,{})}),Object(oe.jsx)(R.a,{variant:"outlined",color:"default",onClick:function(){return te(!0)},children:Object(oe.jsx)(P.a,{})})]})]}),Object(oe.jsx)(se,{open:ee,config:t,onClose:function(){return te(!1)}}),Object(oe.jsx)(B.a,{open:!!G,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&V(void 0)},message:G})]})},de=n(54),je=n(241),fe=["title","titleId"];function be(){return be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function pe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function me(e,t){var n=e.title,r=e.titleId,c=pe(e,fe);return a.createElement("svg",be({width:"100%",height:"100%",viewBox:"0 0 217 60",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1.5},ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("g",{transform:"matrix(2,0,0,2,0,0)"},a.createElement("g",{id:"Artboard1",transform:"matrix(0.0844071,0,0,0.0374906,0,0)"},a.createElement("rect",{x:0,y:0,width:1280,height:800,style:{fill:"none"}}),a.createElement("g",{transform:"matrix(11.8473,0,0,26.6734,0,0)",className:"divergent"},a.createElement("path",{d:"M2.464,15.385L24.021,15.385C24.021,15.385 57.824,11.295 63.647,10.351C69.47,9.406 101.344,2.157 101.344,2.157L105.11,13.807L68.64,22.195L24.737,27.411L2.49,27.313L2.464,15.385Z",style:{stroke:"rgb(61,61,61)",strokeWidth:1}})),a.createElement("g",{transform:"matrix(11.8473,0,0,26.6734,-0.407078,5.04809)",className:"straight"},a.createElement("rect",{x:2.584,y:15.473,width:102.471,height:11.849,style:{stroke:"rgb(61,61,61)",strokeWidth:1}})))))}var he,Oe,xe,ge,ve=a.forwardRef(me),ye=(n.p,l.a[500],de.a[500],je.a[500],function(e){var t=e.config,n=Object(a.useContext)(ae.a),c=Object(r.a)(n,2),o=(c[0],c[1]),l=Object(a.useState)(t.current===t.divergent),u=Object(r.a)(l,2),d=u[0],j=u[1],f=Object(a.useState)(!1),b=Object(r.a)(f,2),p=b[0],m=b[1],h=Object(a.useState)(!1),O=Object(r.a)(h,2),x=(O[0],O[1]),g=Object(a.useState)(!0),v=Object(r.a)(g,2),y=(v[0],v[1]),k=t.current,w=t.turnoutId,E=t.straight,_=t.divergent,C=t.section;t.default;Object(a.useEffect)((function(){j(k===_)}),[k,E,_]);var S=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(!0),y(!1),e.next=7,ce.a.turnouts.put({turnoutId:w,current:d?E:_});case 7:return n=e.sent,e.next=10,o({type:"UPDATE_TURNOUT",payload:n});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),x(e.t0.toString());case 16:return e.prev=16,m(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(oe.jsx)("button",{onClick:S,className:"turnout__layout__switch turnout__layout__switch--".concat(C.replace(/\s+/g,"-").toLowerCase()," turnout__layout__switch--").concat(w," turnout__layout__switch--").concat(d?"divergent":"straight"),children:Object(oe.jsx)(ve,{className:"turnout__layout__switch__img"})})}),ke=n.p+"static/media/tamarack-station-south.c1c848d8.png",we=["title","titleId"];function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ce(e,t){var n=e.title,r=e.titleId,c=_e(e,we);return a.createElement("svg",Ee({width:"100%",height:"100%",viewBox:"0 0 155 90",xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1.5},ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("g",{transform:"matrix(1,0,0,1,-66.0732,0)"},a.createElement("g",{id:"Artboard3",transform:"matrix(0.701398,0,0,0.817859,63.9469,98.1431)"},he||(he=a.createElement("rect",{x:3.032,y:-120,width:220.969,height:110})),Oe||(Oe=a.createElement("clipPath",{id:"_clip1"},a.createElement("rect",{x:3.032,y:-120,width:220.969,height:110}))),a.createElement("g",{clipPath:"url(#_clip1)"},xe||(xe=a.createElement("g",{id:"Layer4"})),a.createElement("g",{id:"lines",transform:"matrix(1.42572,0,0,1.2227,-91.1706,-120)"},a.createElement("path",{d:"M210.073,24L150.027,84.046",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:2}}),a.createElement("g",{transform:"matrix(0.834661,0,0,0.834661,32.7493,1.98407)"},a.createElement("path",{d:"M198.073,12L126.188,83.886",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:"2.4px"}})),a.createElement("path",{d:"M66.073,84.404L198.073,84.404",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:2}}),a.createElement("g",{transform:"matrix(1.33333,0,0,1.33333,-22.0244,-23.9829)"},a.createElement("path",{d:"M66.073,71.949L138.073,71.949",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:"1.5px"}})),a.createElement("path",{d:"M66.073,60L174.073,60",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:2}}),a.createElement("path",{d:"M66.073,47.943L186.073,47.943",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:2}}),a.createElement("path",{d:"M174.073,36L138.073,36",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:2}}),a.createElement("path",{d:"M138.073,36L126.367,47.706",style:{fill:"none",stroke:"rgb(34,219,255)",strokeWidth:2}}),a.createElement("g",{transform:"matrix(1,0,0,1,0,0.113241)"},a.createElement("path",{d:"M221.06,11.887L66.073,11.887",style:{fill:"none",stroke:"rgb(0,171,0)",strokeWidth:2}})),a.createElement("g",{transform:"matrix(0.0774259,0.0774259,-0.0792739,0.0792739,145.9,5.94191)"},a.createElement("path",{d:"M221.06,11.887L66.073,11.887",style:{fill:"none",stroke:"rgb(0,171,0)",strokeWidth:"18.05px"}})),a.createElement("g",{transform:"matrix(1,0,0,1,7.10543e-15,12.1132)"},a.createElement("path",{d:"M221.06,11.887L66.073,11.887",style:{fill:"none",stroke:"rgb(0,171,0)",strokeWidth:2}}))),a.createElement("g",{className:"turnout",id:"t105",transform:"matrix(1.42572,0,0,1.2227,-91.1706,-120)"},a.createElement("g",{transform:"matrix(1,0,0,1,-1.09602,-0.05725)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.707107,-0.707107,0.707107,0.707107,20.1388,146.307)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}}))),a.createElement("g",{className:"turnout",id:"t106",transform:"matrix(1.42572,0,0,1.2227,-108.416,-105.258)"},a.createElement("g",{transform:"matrix(1,0,0,1,-1.09602,-0.05725)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.707107,-0.707107,0.707107,0.707107,20.1388,146.307)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}}))),a.createElement("g",{className:"turnout",id:"t101",transform:"matrix(1.42572,0,0,1.2227,-128.024,-89.0408)"},a.createElement("g",{transform:"matrix(1,0,0,1,3.88808,11.0838)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.506722,-0.506722,0.506722,0.506722,64.6929,121.038)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"3.35px",strokeLinecap:"butt"}}))),a.createElement("g",{className:"turnout",id:"t110",transform:"matrix(1.42572,0,0,1.2227,-162.226,-89.0408)"},a.createElement("g",{transform:"matrix(1,0,0,1,4.49271,-25.3775)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.707107,-0.707107,0.707107,0.707107,20.7434,109.846)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}}))),a.createElement("g",{className:"turnout",id:"t104",transform:"matrix(1.42572,0,0,1.2227,-110.384,-132.549)"},a.createElement("g",{transform:"matrix(0.839868,0,0,0.932393,30.1429,1.50832)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.7px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.707107,-0.707107,0.707107,0.707107,21.4699,144.69)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}}))),a.createElement("g",{className:"turnout",id:"t102",transform:"matrix(1.42572,0,0,1.2227,-76.19,-161.894)"},a.createElement("g",{transform:"matrix(0.839868,0,0,0.932393,30.1429,1.50832)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.7px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.707107,-0.707107,0.707107,0.707107,21.4699,144.69)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"2.4px",strokeLinecap:"butt"}}))),a.createElement("g",{className:"turnout",id:"t101",transform:"matrix(1.42572,0,0,1.2227,-112.2,-161.09)"},a.createElement("g",{transform:"matrix(0.839868,0,0,0.932393,21.1807,0.851025)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.7px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.839868,0,0,0.932393,19.3909,12.851)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{fill:"none",stroke:"black",strokeWidth:"2.7px",strokeLinecap:"butt"}})),a.createElement("g",{transform:"matrix(0.798458,0.798458,-0.798458,0.798458,65.9963,-129.873)"},a.createElement("path",{d:"M174.073,48L184.499,48",style:{display:"none",fill:"none",stroke:"black",strokeWidth:"2.13px",strokeLinecap:"butt"}}))))),ge||(ge=a.createElement("g",{id:"Layer3"}))))}var Se=a.forwardRef(Ce),Ie=(n.p,n(223),function(e){var t=e.view,n=e.filter,o=e.groupBy,i=Object(a.useContext)(ae.a),s=Object(r.a)(i,2),l=s[0],u=(s[1],l.turnouts),d=n(u).reduce((function(e,t){return e.includes(t.line)||e.push(t.line),e}),[]),j=n(u).reduce((function(e,t){return e.includes(t.section)||e.push(t.section),e}),[]);return u?Object(oe.jsxs)(c.a,{container:!0,className:"turnouts turnouts--".concat(t),children:[Object(oe.jsx)(c.a,{item:!0,sm:12,children:Object(oe.jsx)(Se,{})}),""===o&&Object(oe.jsx)(c.a,{item:!0,sm:12,className:"turnout__grid-item",children:u.map((function(e){return Object(oe.jsx)("div",{className:"turnout__container",children:Object(oe.jsx)(ue,{config:e})},"turnout".concat(o).concat(e.turnoutId))}))}),"line"===o&&d.map((function(e){return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(c.a,{item:!0,sm:12,className:"turnout__grid-item",children:Object(oe.jsx)("h3",{children:e})}),Object(oe.jsx)(c.a,{item:!0,sm:12,className:"turnout__grid-item",children:u.filter((function(t){return t.line===e})).map((function(e){return Object(oe.jsxs)("div",{className:"turnout__container",children:[console.log("line",e,e.turnoutId),Object(oe.jsx)(ue,{config:e})]},"turnout".concat(o).concat(e.turnoutId))}))})]},"line-".concat(e))})),"board"===o&&j.map((function(e){return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(c.a,{item:!0,sm:12,className:"turnout__grid-item",children:Object(oe.jsx)("h3",{children:e})}),Object(oe.jsx)(c.a,{item:!0,sm:12,className:"turnout__grid-item",children:u.filter((function(t){return t.section===e})).map((function(e){return Object(oe.jsx)("div",{className:"turnout__container",children:Object(oe.jsx)(ue,{config:e})},"turnout".concat(o).concat(e.turnoutId))}))}),Object(oe.jsx)(c.a,{item:!0,sm:12,className:"turnout__grid-item",children:Object(oe.jsxs)("div",{className:"turnout__layout",children:[Object(oe.jsx)("img",{src:ke}),u.filter((function(t){return t.section===e})).map((function(e){return Object(oe.jsx)(ye,{config:e},"mapturnout".concat(o).concat(e.turnoutId))}))]})})]},"section-".concat(e))}))]}):null});Ie.defaultProps={initialView:"compact",groupBy:"",filter:function(e){return e}};t.a=Ie},116:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n(124),o=n(14),i=n.n(o),s=n(18),l=n(179),u=n(337),d=n(332),j=n(347),f=n(353),b=n(348),p=n(346),m=n(341),h=n(308),O=n(340),x=n(328),g=n(326),v=n(342),y=n(323),k=n(39),w=n.n(k),E=n(168),_=n.n(E),C=n(114),S=n.n(C),I=n(88),L=n.n(I),N=n(112),A=n.n(N),M=n(113),T=n.n(M),P=n(171),D=n.n(P),W=n(169),R=n.n(W),U=n(170),z=n.n(U),J=n(325),q=n(1),F=function(e){var t=e.speed,n=e.autoStop,r=e.onChange,a=e.max,o=a>30?10:5,i=Array.apply(null,Array(2*a/o+1)).map((function(e,t){var n=-1*a+t*o;return{label:n,value:n}}));return Object(q.jsx)(c.a,{display:"flex",className:"throttle__slider__container",children:Object(q.jsx)(J.a,{orientation:"vertical",defaultValue:0,min:-a,max:a,marks:i,value:t,track:!1,"aria-labelledby":"vertical-slider",onChange:function(e,t){r(t)},onChangeCommitted:function(e,t){console.log("handleChangeCommitted",n),n&&r(0)},className:"throttle__slider \n        ".concat(t<0?"throttle__speed--reverse":"throttle__speed--forward")})})},B=n(109),H=n(110),G=n(22),V=n(111),Y=n(25),Q=(n(224),function(e){var t=e.jmriApi,n=e.loco,c=e.onLocoClick,o=e.loco,k=o.address,E=o.isAcquired,C=o.speed,I=o.autoStop,N=o.forward,M=isNaN(n.maxSpeed)?100:n.maxSpeed;console.log("loco.maxSpeed",n.address,n.maxSpeed,M);var P=100*C*(!0===N?1:-1),W=Object(a.useContext)(G.a),U=Object(r.a)(W,2),J=(U[0],U[1]),Q=Object(a.useState)(P),X=Object(r.a)(Q,2),Z=X[0],K=X[1],$=Object(a.useState)(M),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],re=Object(a.useState)(-M),ae=Object(r.a)(re,2),ce=ae[0],oe=ae[1],ie=Object(a.useState)(!1),se=Object(r.a)(ie,2),le=se[0],ue=se[1],de=Object(V.a)(Z,100),je=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J({type:"UPDATE_LOCO",payload:{address:k,cruiseControl:!0}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.releaseLoco(k);case 3:return e.sent,e.next=6,J({type:"UPDATE_LOCO",payload:{address:k,isAcquired:!1,cruiseControl:!1}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=!n.autoStop,console.log("handleStickyThrottleClick",t,n),e.next=5,Y.a.locos.put({address:k,autoStop:t});case 5:return e.next=7,J({type:"UPDATE_LOCO",payload:{address:k,autoStop:t}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(t.target.value),oe(-t.target.value),ue(!1),e.next=6,Y.a.locos.put({address:k,maxSpeed:te});case 6:return e.next=8,J({type:"UPDATE_LOCO",payload:{address:k,maxSpeed:te}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)(j.a,{className:"throttle throttle--".concat(n.name.replace(" ",""),"  throttle--").concat(n.road.replace(" ","")),children:[Object(q.jsx)(f.a,{title:n.name,avatar:Object(q.jsx)(d.a,{label:"".concat(n.address&&n.address.length>2?n.address.substring(0,2):n.address),icon:Object(q.jsx)(w.a,{}),className:n.road.toLowerCase().replace(/ /g,"-"),clickable:!0,onClick:function(){c&&c(n)}})}),Object(q.jsx)(b.a,{className:"throttle__content grow flex",children:Object(q.jsxs)(l.a,{container:!0,spacing:1,className:"grow",children:[Object(q.jsxs)(l.a,{item:!0,xs:5,flexGrow:1,display:"flex",children:[E&&Object(q.jsx)(H.a,{speed:de,address:k,jmriApi:t,forward:N}),Object(q.jsx)(F,{max:te,className:"throttle__slider__control",speed:Z,autoStop:I,onChange:function(e){K(e)}})]}),Object(q.jsx)(l.a,{item:!0,xs:7,display:"flex",children:Object(q.jsxs)("div",{className:"throttle__controls",children:[Object(q.jsxs)(u.a,{elevation:3,className:"",display:"flex",direction:"column",children:[Object(q.jsx)(B.a,{speed:Z}),Object(q.jsxs)(p.a,{orientation:"vertical",className:"throttle__controls__group","aria-label":"vertical outlined primary button group",children:[Object(q.jsx)(m.a,{className:"speed-up-btn",size:"large",disabled:C===te,onClick:function(){K(Z+1)},children:Object(q.jsx)(A.a,{})}),Object(q.jsx)(m.a,{className:"speed-stop-btn",size:"large",disabled:!E,color:"primary",onClick:function(){K(parseInt("0.0"))},children:Object(q.jsx)(L.a,{})}),Object(q.jsx)(m.a,{className:"speed-down-btn",size:"large",disabled:C===ce,onClick:function(){K(Z-1)},children:Object(q.jsx)(T.a,{})})]})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)(m.a,{size:"large",onClick:je,children:Object(q.jsx)(_.a,{})}),Object(q.jsx)(m.a,{size:"large",onClick:fe,children:Object(q.jsx)(S.a,{})}),Object(q.jsx)(m.a,{size:"large",onClick:function(){ue(!0)},children:Object(q.jsx)(R.a,{})}),Object(q.jsx)(m.a,{size:"large",onClick:be,children:I?Object(q.jsx)(z.a,{}):Object(q.jsx)(D.a,{})})]})]})})]})})]}),Object(q.jsxs)(O.a,{onClose:function(){ue(!1)},open:le,children:[Object(q.jsx)(h.a,{children:"Set Throttle Min/Max"}),Object(q.jsxs)(v.a,{fullWidth:!0,sx:{padding:"1rem"},children:[Object(q.jsx)(x.a,{id:"minmax-label",children:"Precison"}),Object(q.jsxs)(y.a,{labelId:"minmax-label",id:"minmax",value:te,label:"Precison",onChange:pe,children:[Object(q.jsx)(g.a,{value:100,children:"100"}),Object(q.jsx)(g.a,{value:50,children:"50"}),Object(q.jsx)(g.a,{value:30,children:"30"}),Object(q.jsx)(g.a,{value:20,children:"20"})]})]})]})]})}),X=n(118),Z=n(38);n(226),t.a=function(e){var t=Object(a.useContext)(G.a),n=Object(r.a)(t,2),o=n[0],i=(n[1],o.locos);return i&&i.length?Object(q.jsxs)(c.a,{display:"flex",flexDirection:"column",flexGrow:1,children:[Object(q.jsx)(c.a,{flexGrow:1,display:"flex",flexDirection:"row",className:"throttles__acquired  throttles__acquired--view-comfy",children:i.filter((function(e){return e.isAcquired&&!e.cruiseControl})).map((function(e){return Object(q.jsx)(Q,{jmriApi:Z.a,loco:e},e.address)}))}),Object(q.jsx)(c.a,{className:"throttles__cruise-control",children:Object(q.jsx)(X.a,{locos:i.filter((function(e){return e.isAcquired&&e.cruiseControl})),jmriApi:Z.a})}),Object(q.jsx)(c.a,{className:"throttles__unaquired",children:Object(q.jsx)(X.a,{locos:i.filter((function(e){return!e.isAcquired})),jmriApi:Z.a})})]}):null}},117:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n(179),o=n(22),i=n(14),s=n.n(i),l=n(18),u=n(332),d=n(347),j=n(353),f=n(348),b=n(334),p=n(329),m=n(336),h=n(140),O=n.n(h),x=n(135),g=n.n(x),v=n(107),y=n.n(v),k=n(106),w=n.n(k),E=n(344),_=n(333),C=n(122),S=n.n(C),I=n(1),L=function(e){var t=e.effect,n=e.effect.effectId,r=e.onChange,a=e.getMetaData,o=e.view,i="pill"===o||"tiny"===o;return Object(I.jsxs)(c.a,{container:!0,direction:"row",children:[!i&&Object(I.jsx)(c.a,{item:!0,xs:9,children:a(t)}),Object(I.jsx)(c.a,{item:!0,xs:i?12:3,children:Object(I.jsxs)(_.a,{size:"small",orientation:i?"horizontal":"vertical",value:t.state,exclusive:!0,onChange:function(e,t){r({effectId:n,state:t})},children:[Object(I.jsx)(E.a,{value:"red",children:Object(I.jsx)(S.a,{style:{color:"red",opacity:"red"==t.state?1:.1}})}),Object(I.jsx)(E.a,{value:"yellow",children:Object(I.jsx)(S.a,{style:{color:"yellow",opacity:"yellow"==t.state?1:.1}})}),Object(I.jsx)(E.a,{value:"green",children:Object(I.jsx)(S.a,{style:{color:"green",opacity:"green"==t.state?1:.1}})})]})})]})},N=n(25),A=n(29),M=function(e){var t=e.effect,n=e.effect.effectId,i=e.view,h=Object(a.useContext)(o.a),x=Object(r.a)(h,2),v=(x[0],x[1]),k=Object(a.useState)(!1),E=Object(r.a)(k,2),_=E[0],C=E[1],S=Object(a.useState)(!0),M=Object(r.a)(S,2),T=(M[0],M[1]),P=function(e){W({effectId:n,state:e.target.checked?1:0})},D=function(e){W({effectId:n,state:1})},W=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(!0),T(!1),e.next=7,N.a.effects.put(t);case 7:return n=e.sent,e.next=10,v({type:"UPDATE_EFFECT",payload:n});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){return Object(I.jsxs)("div",{className:"effect__meta",children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:e.actions.length})," Actions | State: ",Object(I.jsx)("strong",{children:e.state})]}),e.line&&Object(I.jsx)(u.a,{label:"Line: ".concat(e.line),size:"small",variant:"outlined",style:{margin:"0.25rem",borderColor:Object(A.c)(e.line)}}),e.section&&Object(I.jsx)(u.a,{label:"Section: ".concat(e.section),size:"small",variant:"outlined",style:{margin:"0.25rem",borderColor:Object(A.d)(e.section)}})]})},U="pill"===i||"tiny"===i,z=U?"small":"large",J=function(){switch(t.type.toLowerCase()){case"signal":return null;case"sound":return Object(I.jsx)(m.a,{onClick:D,color:"secondary",size:"small",variant:"outlined",startIcon:Object(I.jsx)(O.a,{}),children:"Play"});default:return Object(I.jsx)(p.a,{checked:!!t.state,onChange:P,name:"effectSwitch",inputProps:{"aria-label":"secondary checkbox"}})}};return Object(I.jsxs)(d.a,{className:"effect",children:[Object(I.jsx)(j.a,{avatar:Object(I.jsx)(b.a,{children:function(){switch(t.type.toLowerCase()){case"light":return Object(I.jsx)(g.a,{fontSize:z});case"lighting animation":return Object(I.jsx)(y.a,{fontSize:z});case"signal":return Object(I.jsx)(w.a,{fontSize:z});case"sound":case"sound loop":return Object(I.jsx)(O.a,{fontSize:z});default:return t.type.substring(0,1)}}()}),title:t.name}),Object(I.jsx)(f.a,{children:"signal"===t.type.toLowerCase()?Object(I.jsx)(L,{effect:t,getMetaData:R,onChange:W,view:i}):Object(I.jsxs)(c.a,{container:!0,direction:"row",children:[!U&&Object(I.jsx)(c.a,{item:!0,xs:9,children:R(t)}),Object(I.jsx)(c.a,{item:!0,xs:U?12:3,children:J()})]})})]})},T=(n(227),function(e){var t=e.view,n=(e.filter,e.groupBy,Object(a.useContext)(o.a)),i=Object(r.a)(n,2),s=i[0],l=(i[1],s.effects),u=s.sensors;return Object(I.jsx)(c.a,{container:!0,className:"effects  effects--".concat(t),spacing:2,children:l&&l.map((function(e){return Object(I.jsx)(c.a,{item:!0,className:"effects__grid-item",xs:"auto",children:Object(I.jsx)(M,{effect:e,sensors:u,view:t},e.effectId)},"effect".concat(e.effectId))}))})});T.defaultProps={initialView:"compact",groupBy:"",filter:function(e){return e}};t.a=T},118:function(e,t,n){"use strict";var r=n(0),a=n(124),c=n(3),o=n(14),i=n.n(o),s=n(18),l=n(8),u=n(337),d=n(332),j=n(39),f=n.n(j),b=n(112),p=n.n(b),m=n(113),h=n.n(m),O=n(172),x=n.n(O),g=n(346),v=n(341),y=n(109),k=n(110),w=n(88),E=n.n(w),_=n(114),C=n.n(_),S=n(22),I=n(111),L=n(1),N=function(e){var t,n=Object(r.useContext)(S.a),a=Object(l.a)(n,2),o=(a[0],a[1]),j=e.jmriApi,b=e.onLocoClick,m=e.loco,O=e.loco,w=O.address,_=O.isAcquired,N=O.speed,A=O.forward,M=100*N*(!0===A?1:-1),T=Object(r.useState)(M),P=Object(l.a)(T,2),D=P[0],W=P[1],R=Object(r.useState)(N?100*N:0),U=Object(l.a)(R,2),z=(U[0],U[1],Object(I.a)(D,100)),J=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"UPDATE_LOCO",payload:{address:t,isAcquired:!0}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!_){e.next=6;break}return e.next=4,o({type:"UPDATE_LOCO",payload:{address:w,cruiseControl:!1}});case 4:e.next=8;break;case 6:return e.next=8,j.requestLoco(w);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:b&&b(m);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("handleParkClick",w),e.next=4,j.releaseLoco(w);case 4:return t=e.sent,console.log("releaseLoco",t),e.next=8,o({type:"UPDATE_LOCO",payload:{address:w,isAcquired:!1,cruiseControl:!1}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){j.on("acquire","Throttles",J)}),[j,J]);return Object(L.jsxs)(u.a,{elevation:3,className:["mini-throttle",_?"mini-throttle__acquired":"mini-throttle__notacquired"].join(" "),children:[Object(L.jsx)(d.a,{label:"".concat(m.address),icon:Object(L.jsx)(f.a,{}),className:"chip",variant:_?"default":"outlined",clickable:!0,onClick:q}),_?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(k.a,{speed:z,address:w,jmriApi:j,forward:A}),Object(L.jsx)(y.a,{speed:z,idleByDefault:m.idleByDefault}),Object(L.jsxs)(g.a,{orientation:"horizontal",className:"throttle__controls__group","aria-label":"vertical outlined primary button group",children:[Object(L.jsx)(v.a,{className:"speed-down-btn",size:"lamediumrge",disabled:-100===N,onClick:function(){W(D-1)},children:Object(L.jsx)(h.a,{})}),Object(L.jsx)(v.a,{className:"speed-stop-btn",size:"medium",disabled:!_,color:"primary",onClick:function(){W(parseInt("0.0"))},children:Object(L.jsx)(E.a,{})}),Object(L.jsx)(v.a,{className:"speed-up-btn",size:"medium",disabled:100===N,onClick:function(){W(D+1)},children:Object(L.jsx)(p.a,{})})]}),Object(L.jsx)(v.a,{size:"medium",onClick:F,children:Object(L.jsx)(C.a,{})})]}):Object(L.jsx)(v.a,(t={variant:"outlined",size:"medium"},Object(c.a)(t,"variant","contained"),Object(c.a)(t,"color","primary"),Object(c.a)(t,"onClick",q),Object(c.a)(t,"children",Object(L.jsx)(x.a,{})),t))]})};n(225),t.a=function(e){var t=e.locos,n=e.jmriApi,r=e.onLocoClick;return t.length>0?Object(L.jsx)(a.a,{display:"flex",flexDirection:"row",flexWrap:"wrap",children:t.map((function(e){return Object(L.jsx)(a.a,{children:Object(L.jsx)(N,{loco:e,jmriApi:n,onLocoClick:r})},e.address)}))}):null}},141:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(0),a={view:"compact"},c=n.n(r).a.createContext(a)},142:function(e,t,n){"use strict";var r=n(16),a=(n(17),n(8)),c=n(0),o=n(179),i=n(337),s=n(53),l=n(54),u=n(241),d=n(242),j=n(62),f=(n(344),n(333),n(332),n(328),n(342),n(345),n(329),n(323),n(343),n(94),n(22),n(1)),b=(s.a[500],l.a[500],u.a[500],d.a[500],j.a[500],n(115)),p=n(116),m=n(117);n(228),t.a=function(e){var t=window.localStorage.getItem("menu")?JSON.parse(window.localStorage.getItem("menu")):{view:"pill",showMaps:!0,group:"",lineFilters:[],sectionFilters:[]},n=Object(c.useState)(t),s=Object(a.a)(n,2),l=s[0];s[1];Object(c.useEffect)((function(){window.localStorage.setItem("menu",JSON.stringify(l))}),[l]);return Object(f.jsxs)(o.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"stretch",children:[Object(f.jsx)(o.a,{item:!0,xs:8,className:"flex",children:Object(f.jsx)(p.a,{})}),Object(f.jsx)(o.a,{item:!0,xs:4,children:Object(f.jsxs)(o.a,{container:!0,direction:"column",children:[Object(f.jsx)(o.a,{item:!0,children:Object(f.jsxs)(i.a,{elevation:3,style:{padding:"0.5rem"},children:[Object(f.jsx)("h2",{children:"Turnouts"}),Object(f.jsx)(b.a,{view:l.view,groupBy:l.group,filter:function(e){var t=e?Object(r.a)(e):[];return l.lineFilters&&l.lineFilters.length>0&&(t=t.filter((function(e){return l.lineFilters.includes(e.line)}))),l.sectionFilters&&l.sectionFilters.length>0&&(t=t.filter((function(e){return l.sectionFilters.includes(e.section)}))),t}})]})}),Object(f.jsx)(o.a,{item:!0,children:Object(f.jsxs)(i.a,{elevation:3,style:{padding:"0.5rem"},children:[Object(f.jsx)("h2",{children:"Effects"}),Object(f.jsx)(m.a,{view:l.view})]})})]})})]})}},154:function(e,t,n){},156:function(e,t,n){"use strict";(function(e){var r=n(17),a=n(16),c=n(14),o=n.n(c),i=n(18),s=n(8),l=n(0),u=n(15),d=n(124),j=n(175),f=n(162),b=n(142),p=n(115),m=n(116),h=n(117),O=(n(118),n(229),n(141)),x=n(22),g=n(29),v=n(25),y=n(38),k=(n(230),n(1));t.a=function(t){var n=this,c=Object(u.e)(),w=Object(g.b)();console.log("appConfig",w);var E=Object(l.useContext)(x.a),_=Object(s.a)(E,2),C=_[0],S=_[1],I=(C.signals,C.effects,C.sensors),L=(C.turnouts,C.modules),N=Object(l.useState)(c&&c.pathname),A=Object(s.a)(N,2),M=A[0],T=(A[1],Object(l.useState)(O.b)),P=Object(s.a)(T,2),D=P[0],W=P[1],R=Object(l.useState)(!1),U=Object(s.a)(R,2),z=U[0],J=U[1],q=Object(l.useState)(!1),F=Object(s.a)(q,2),B=F[0],H=F[1],G=Object(l.useState)(!1),V=Object(s.a)(G,2),Y=V[0],Q=V[1],X=Object(l.useState)(!1),Z=Object(s.a)(X,2),K=Z[0],$=Z[1];Object(l.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.initialize();case 3:return t=e.sent,console.log("apiInitState",t),e.next=7,S({type:"INIT_STATE",payload:t});case 7:$(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("api initialization error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(l.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.a.on("ready","TrackMaster",ee.bind(n)),e.next=3,y.a.setup(w.jmri);case 3:t=e.sent,J(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();z||e()}),[z]),Object(l.useEffect)((function(){!B&&Y&&I&&I.length>0&&(console.log("watchSensors",I),y.a.watchSensors(Object(a.a)(I)),y.a.on("sensor","TrackMaster",te),H(!0))}),[y.a,Y,B,I]);var ee=function(e){Q(e)},te=function(e){var t=e.name,n=(e.inverted,e.state),r=function(e,t){return 4===t&&v.a.signals.put({signalId:e.signalId,state:4===t?1:0}),e},a=I.find((function(e){return e.pin==parseInt(t.substring(2))}));a.HIGH.map((function(e){return r(e,n)})),a.LOW.map((function(e){return r(e,n)}))};return Object(k.jsx)(O.a.Provider,{value:D,children:Object(k.jsxs)(d.a,{display:"flex",flexDirection:"column",height:"100%",children:[Object(k.jsx)(d.a,{children:Object(k.jsx)(j.a,{page:M,handleMenuClick:function(e){var t=Object(r.a)(Object(r.a)({},D),e);W(t)},jmriApi:y.a,jmriReady:Y,apiReady:K})}),Object(k.jsx)(d.a,{flexGrow:1,display:"flex",width:"100%",height:"100%",alignContent:"center",className:"App-content",mt:1,children:Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.a,{path:"/",exact:!0,element:Object(k.jsx)(b.a,{})}),Object(k.jsx)(u.a,{path:"/conductor",element:Object(k.jsx)(b.a,{})},e),L&&L.map((function(e){switch(e){case"locos":return Object(k.jsx)(u.a,{path:"/throttles",element:Object(k.jsx)(m.a,{jmriApi:y.a})},e);case"turnouts":return Object(k.jsx)(u.a,{path:"/turnouts",element:Object(k.jsx)(p.a,{})},e);case"effects":return Object(k.jsx)(u.a,{path:"/effects",element:Object(k.jsx)(h.a,{})},e)}}))]})}),Object(k.jsx)(d.a,{mt:1,children:Object(k.jsx)(f.a,{page:M,modules:L})})]})})}}).call(this,n(213)(e))},162:function(e,t,n){"use strict";n(0);var r=n(59),a=n(249),c=n(180),o=n(39),i=n.n(o),s=n(42),l=n(1);t.a=function(e){var t=e.page,n=e.modules;e.onNavigate;return Object(l.jsxs)(a.a,{value:t,className:"App-footer",children:[Object(l.jsx)(c.a,{label:"Conductor",value:"/",to:"/",icon:Object(l.jsx)(i.a,{}),component:r.b}),n&&n.filter((function(e){return!!s.a[e]})).map((function(e){return Object(l.jsx)(c.a,{label:s.a[e].link,value:"".concat(s.a[e].link),to:"".concat(s.a[e].link),icon:s.a[e].icon,component:r.b},e)}))]})}},175:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n(338),o=n(339),i=n(248),s=n(174),l=n(326),u=n(336),d=n(321),j=n(160),f=n.n(j),b=n(1),p={unknown:0,on:2,off:4},m=function(e){var t=e.jmriApi,n=e.jmriReady,c=Object(a.useState)(p.unknown),o=Object(r.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)(!1),j=Object(r.a)(l,2),m=j[0],h=j[1];Object(a.useEffect)((function(){n&&!m&&(t.on("power","Power",O),t.power(),h(!0))}),[m,n,t]);var O=function(e){s(e)};return Object(b.jsx)(u.a,{onClick:function(){i===p.unknown||i===p.off?t.power(p.on):i===p.on&&t.power(p.off)},className:t.getState().ready&&m?"power-".concat(function(){var e=Object.keys(p).filter((function(e){return p[e]===i}));return e.length?e[0]:"unknown"}()):"power-pending",variant:"contained",color:"primary",startIcon:Object(b.jsx)(f.a,{}),children:Object(b.jsx)(d.a,{smDown:!0,children:"Power"})})},h=n(17),O=n(332),x=n(102),g=n.n(x),v=n(308),y=n(340),k=n(327),w=n(121),E=n.n(w),_=n(322),C=n(78),S=n.n(C),I=n(77),L=n.n(I),N=n(341),A=n(331),M=n(29),T=function(e){var t=e.jmriReady,n=e.apiReady,c=Object(M.b)(),o=Object(a.useState)(!1),i=Object(r.a)(o,2),s=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(r.a)(u,2),j=d[0],f=d[1],p=Object(a.useState)(!1),m=Object(r.a)(p,2),x=m[0],w=m[1],C=Object(a.useState)(c.jmri),I=Object(r.a)(C,2),T=I[0],P=I[1],D=Object(a.useState)(c.api),W=Object(r.a)(D,2),R=W[0],U=W[1],z=Object(a.useState)(c.layoutId),J=Object(r.a)(z,2),q=J[0],F=J[1],B=!!c.jmri,H=!!c.api,G="status-monitor--".concat(B&&t?"connected":"unknown"),V="status-monitor--".concat(H&&n?"connected":"unknown");return Object(b.jsxs)("div",{className:"status-monitor",children:[Object(b.jsx)(A.a,{title:"Layout ID",children:Object(b.jsx)(O.a,{variant:"outlined",size:"small",icon:Object(b.jsx)(L.a,{className:V}),label:"Layout ID: ".concat(c.layoutId),color:"default",onClick:function(){return w(!0)}})}),Object(b.jsx)(A.a,{title:"JMRI Connection Status",children:Object(b.jsx)(O.a,{variant:"outlined",size:"small",icon:Object(b.jsx)(S.a,{className:G}),label:"JMRI",color:"default",onClick:function(){return l(!0)}})}),Object(b.jsx)(A.a,{title:"REST API Status",children:Object(b.jsx)(O.a,{variant:"outlined",size:"small",icon:Object(b.jsx)(g.a,{className:V}),label:"API",color:"default",onClick:function(){return f(!0)}})}),Object(b.jsxs)(y.a,{onClose:function(){return w(!1)},open:x,children:[Object(b.jsx)(v.a,{children:"Layout ID"}),Object(b.jsx)(_.a,{sx:{padding:"1rem",width:"360px"},id:"layout-id",freeSolo:!0,onChange:function(e,t){F(t)},options:M.f,value:q,renderInput:function(e){return Object(b.jsx)(k.a,Object(h.a)(Object(h.a)({},e),{},{label:"Layout ID"}))}}),Object(b.jsx)(N.a,{size:"large",onClick:function(){c.layoutId=q,Object(M.g)(c),window.location.reload(!1)},children:Object(b.jsx)(E.a,{})})]}),Object(b.jsxs)(y.a,{onClose:function(){return f(!1)},open:j,children:[Object(b.jsx)(v.a,{children:"API Host"}),Object(b.jsx)(_.a,{sx:{padding:"1rem",width:"360px"},id:"api-host",freeSolo:!0,onChange:function(e,t){U(t)},options:M.a,value:R,renderInput:function(e){return Object(b.jsx)(k.a,Object(h.a)(Object(h.a)({},e),{},{label:"API Host"}))}}),Object(b.jsx)(N.a,{size:"large",onClick:function(){c.api=R,Object(M.g)(c),window.location.reload(!1)},children:Object(b.jsx)(E.a,{})})]}),Object(b.jsxs)(y.a,{onClose:function(){return l(!1)},open:s,children:[Object(b.jsx)(v.a,{children:"JMRI Host"}),Object(b.jsx)(_.a,{sx:{padding:"1rem",width:"360px"},id:"jmri-host",freeSolo:!0,onChange:function(e,t){P(t)},options:M.e,value:T,renderInput:function(e){return Object(b.jsx)(k.a,Object(h.a)(Object(h.a)({},e),{},{label:"JMRI Host"}))}}),Object(b.jsx)(N.a,{size:"large",onClick:function(){c.jmri=T,Object(M.g)(c),window.location.reload(!1)},children:Object(b.jsx)(E.a,{})})]})]})},P=n(42);t.a=function(e){var t=e.page,n=e.jmriApi,u=e.jmriReady,d=e.apiReady,j=e.onSSLAuth,f=Object(a.useState)(null),p=Object(r.a)(f,2),h=p[0],O=(p[1],Object(a.useState)(null)),x=Object(r.a)(O,2),g=x[0],v=x[1],y=Object(P.b)(t);return Object(b.jsxs)(c.a,{position:"sticky",children:[Object(b.jsxs)(o.a,{children:[Object(b.jsx)(i.a,{variant:"h6",className:"title",children:y?y.label:"[unknown]"}),Object(b.jsx)(T,{jmriReady:u,apiReady:d}),Object(b.jsx)(m,{jmriApi:n,jmriReady:u})]}),Object(b.jsx)(s.a,{id:"menu",anchorEl:h,keepMounted:!0,open:!!g,onClose:function(){v(null)},children:Object(b.jsx)(l.a,{onClick:j,children:"View API Host"})})]})}},212:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(0),c=n(17),o=(n(25),function(e,t){switch(t.type){case"INIT_STATE":return Object(c.a)(Object(c.a)({},e),t.payload);case"UPDATE_LOCO":var n=e.locos.map((function(e){return e.address==t.payload.address?Object(c.a)(Object(c.a)({},e),t.payload):e}));return console.log("UPDATE_LOCO",n,t),Object(c.a)(Object(c.a)({},e),{},{locos:n});case"UPDATE_TURNOUTS":return Object(c.a)(Object(c.a)({},e),{},{turnouts:t.payload});case"UPDATE_TURNOUT":var r=e.turnouts.map((function(e){return e.turnoutId===t.payload.turnoutId?Object(c.a)(Object(c.a)({},e),t.payload):e}));return Object(c.a)(Object(c.a)({},e),{},{turnouts:r});case"UPDATE_EFFECTS":return Object(c.a)(Object(c.a)({},e),{},{effects:t.payload});case"UPDATE_EFFECT":var a=e.effects.map((function(e){return e.effectId===t.payload.effectId?Object(c.a)(Object(c.a)({},e),t.payload):e}));return Object(c.a)(Object(c.a)({},e),{},{effects:a});case"UPDATE_SIGNALS":return Object(c.a)(Object(c.a)({},e),{},{signals:t.payload});case"UPDATE_SENSORS":return Object(c.a)(Object(c.a)({},e),{},{sensors:t.payload});default:return console.warn("REDUCER NOT FOUND: ",t),e}}),i={layout:null,userPreferences:{}},s=n(1),l=Object(a.createContext)(i);t.b=function(e){var t=e.children,n=Object(a.useReducer)(o,i),c=Object(r.a)(n,2),u=c[0],d=c[1];return Object(s.jsx)(l.Provider,{value:[u,d],children:t})}},220:function(e){e.exports=JSON.parse('{"layoutId":"betatrack","name":"Beta Track","api":"http://tamarackpi:5000","jmri":"http://tamarackpi:12080/json/"}')},221:function(e){e.exports=JSON.parse('{"layoutId":"tam","name":"Emulator Junction","modules":["turnouts","throttles","signals","sensors","effects"],"api":"http://localhost:5000","apiHost":"localhost","jmri":"http://localhost:12080/json/","turnouts":{"device":"localhost","interface":"emulator"},"signals":{"device":"localhost","interface":"emulator"},"sensors":{"device":"arduino","interface":"serial"},"effects":{"arduino":["emulator"],"pi":["analogaudio","PCA9685","GPIO"]}}')},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){"use strict";n(0),n(59),n(179),n(77),n(78),n(39),n(42),n(1)},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(60),o=n.n(c),i=(n(212),n(317)),s=n(156),l=n(330),u=n(22),d=n(59),j=n(173),f=n(53),b=n(316),p=n(137),m=Object(j.a)({typography:{useNextVariants:!0},palette:{mode:"dark",primary:f.a,secondary:b.a},background:{default:p.a[900]}}),h=(n(231),n(1));var O=function(){return Object(h.jsx)(l.a,{theme:m,children:Object(h.jsxs)(u.b,{children:[Object(h.jsx)(i.a,{}),Object(h.jsx)(d.a,{children:Object(h.jsx)(s.a,{})})]})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,359)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root")),x()},25:function(e,t,n){"use strict";var r=n(3),a=n(16),c=n(14),o=n.n(c),i=n(17),s=n(18),l=n(53),u=n(54),d=n(312),j=n(313),f=n(68),b=n(67),p=n(314),m=n(62),h=n.p+"static/media/IDAWANY-blueline.863dee50.png",O=n.p+"static/media/IDAWANY-brownline.c1a67e89.png",x=n.p+"static/media/IDAWANY-greenline.c38192f4.png",g=n.p+"static/media/IDAWANY-magentaline.0ab0069c.png",v=n.p+"static/media/IDAWANY-orangeline.6ba8564b.png",y=n.p+"static/media/IDAWANY-purpleline.f7659374.png",k=n.p+"static/media/IDAWANY-redline.8ce94a81.png",w=n.p+"static/media/IDAWANY-yellowline.b7295c95.png",E=n(29),_=Object(E.b)(),C=(l.a[500],u.a[500],d.a[500],j.a[500],f.a[500],b.a[500],p.a[500],m.a[500],{isAcquired:!1,cruiseControl:!1,autoStop:!0,maxSpeed:100,speed:0,forward:null});function S(){return I.apply(this,arguments)}function I(){return I=Object(s.a)(o.a.mark((function e(){var t,n,r,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,n=a.length>1&&void 0!==a[1]?a[1]:null,e.prev=2,null===t){e.next=16;break}if(null===n){e.next=10;break}return e.next=7,fetch("".concat(_.api,"/").concat(t,"s/").concat(n));case 7:e.t1=e.sent,e.next=13;break;case 10:return e.next=12,fetch("".concat(_.api,"/").concat(t,"s"));case 12:e.t1=e.sent;case 13:e.t0=e.t1,e.next=19;break;case 16:return e.next=18,fetch("".concat(_.api,"/"));case 18:e.t0=e.sent;case 19:return r=e.t0,e.abrupt("return",r.json());case 23:throw e.prev=23,e.t2=e.catch(2),console.error(e.t2),new Error("Unable to read",t,"Id=".concat(n));case 27:case"end":return e.stop()}}),e,null,[[2,23]])}))),I.apply(this,arguments)}function L(){return L=Object(s.a)(o.a.mark((function e(){var t,n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get();case 2:return t=e.sent,console.log("appConfig",_),console.log("layoutConfig",t),n=t.modules.reduce((function(e,t){return M[t]&&M[t].get?[].concat(Object(a.a)(e),[t]):Object(a.a)(e)}),[]),console.log("getModules",n,t.modules),e.next=9,Promise.all(n.map((function(e){return M[e].get().then((function(t){return M[e].initialize?M[e].initialize(t):t}))})));case 9:return c=e.sent,s=n.reduce((function(e,t,n){return Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t,c[n]))}),{modules:t.modules}),console.log("initialState",s),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function N(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(o.a.mark((function e(t,n,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r?n[r]:n["".concat(t,"Id")],e.next=4,fetch("".concat(_.api,"/").concat(t,"s/").concat(a),{method:"PUT",cache:"no-cache",crossDomain:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),console.error(e.t0),new Error("Unable to update",t,n);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var M={initialize:function(){return L.apply(this,arguments)},get:S,put:N,turnouts:{get:function(e){return S("turnout",e)},put:function(e){return N("turnout",e)}},effects:{get:function(e){return S("effect",e)},put:function(e){return N("effect",e)}},locos:{get:function(e){return S("loco",e,"address")},put:function(e){return N("loco",e,"address")},initialize:function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},C),e)}))}},sensors:{get:function(e){return S("sensor",e)}}};t.a=M},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return O})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return w}));var r=n(137),a=n(53),c=n(54),o=n(241),i=n(242),s=n(62),l=n(178),u=n(68),d=n(243),j=n(244),f="lcConfig",b=function(){try{var e=x();return e||n(220)}catch(t){return console.warn("Loading default config"),n(221)}},p=["http://tamarackpi:12080/json/","http://traincontrol:12080/json/","http://localhost:12080/json/"],m=["http://tamarackpi:5000","http://traincontrol:5000","http://localhost:5000"],h=["tam","traincontrol","betatrack"],O=function(e){return window.localStorage.setItem(f,JSON.stringify(e))},x=function(){var e=window.localStorage.getItem(f);return e?JSON.parse(e):null},g=r.a[500],v=[{lineId:"Mainline Red",color:a.a[500]},{lineId:"Mainline Green",color:c.a[500]},{lineId:"Tamarack Station",color:o.a[500]}],y=[{sectionId:"Tamarack South",color:i.a[500]},{sectionId:"Tamarack North",color:s.a[500]},{sectionId:"Tamarack Plaza",color:l.a[500]},{sectionId:"City North",color:u.a[500]}],k=(a.a[500],d.a[500],l.a[500],j.a[500],c.a[500],function(e){var t=y.find((function(t){return t.sectionId===e}));return t?t.color:g}),w=function(e){var t=v.find((function(t){return t.lineId===e}));return t?t.color:g}},38:function(e,t,n){"use strict";var r=n(14),a=n.n(r),c=n(18),o=!1,i=!1,s=null,l=window.jQuery,u=(new window.Logger,{speed:{resolve:function(){},reject:function(){}},direction:{resolve:function(){},reject:function(){}},acquire:{resolve:function(){},reject:function(){}},release:{resolve:function(){},reject:function(){}},power:{resolve:function(){},reject:function(){}},ready:{resolve:function(){},reject:function(){}},setup:{resolve:function(){},reject:function(){}}});window.onerror=function(e,t,n){return s&&s.closeSocket(),console.error("\nError running javascript:\n"+e+"\n\nURL:\n"+t+"\n\nLine Number: "+n),!0},window.onunload=function(){s&&s.closeSocket()};var d=function(e){console.log("Communication lost.",e)},j=function(e){console.log("__throttleAcquisition",e),y("acquire",e)},f=function(e){console.log("__throttleRelease",e),y("release",e)},b=function(e,t){console.log("__throttleDirection",e,t),y("direction",{name:e,forward:t})},p=function(e,t){console.log("__throttleSpeed",e,t),y("speed",{name:e,speed:t})},m=function(e,t,n){},h=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=""+(r=n/100),0===r&&(c=s.STOP),1===r&&(c=s.FULL_SPEED),w()&&s.setJMRI("throttle",t,{address:t,speed:c}),e.abrupt("return",k("speed","New throttle action dispatched."));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(u.acquire.reject)&&s.setJMRI("throttle",t,{throttle:t,address:t}),e.abrupt("return",k("acquire","New loco request action dispatched."));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("releaseLoco",t),w(u.release.reject)&&s.setJMRI("throttle",t,{release:null}),e.abrupt("return",k("release","New loco release action dispatched."));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{state:t}:{},w(u.power.reject)&&s.setJMRI("power",null,n),e.abrupt("return",k("power","New power action dispatched."));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={},y=function(e,t){u[e]&&u[e].resolve(t),v[e]&&(console.log("fireevent",e,v[e]),Object.keys(v[e]).forEach((function(n){v[e][n](t)})))},k=function(e,t){return t&&u[e]&&u[e].reject(t),new Promise((function(t,n){u[e].resolve=t,u[e].reject=n}))},w=function(e){var t;return o?i||(t="Comm not ready"):t="Setup not called",!t||(console.error(t),e&&e(t),!1)},E={setup:function(e){if(o)return console.log("throttle API already setup"),o;if(s=l.JMRI(e,{toSend:function(e){},fullData:function(e){},error:function(e,t){0===e?d(t):200===e?console.log(t):console.log("Error: "+e+" - "+t)},end:function(){d("The JMRI WebSocket service was turned off.\nSolve the problem and refresh web page.")},ready:function(e,t,n){!function(e,t,n){console.log("__jmriReady",e,t,n),y("ready",i=!0)}(e,t,n)},throttle:function(e,t,n,r,a){!function(e,t,n,r,a){if(console.log("__throttleState",e,t,n,r,a,arguments),void 0===e||"undefined"!==typeof t||"undefined"!==typeof n||"undefined"!==typeof r){void 0!==t&&j(t),void 0!==r&&b(e,r),void 0!==n&&p(e,n);for(var c=0;c<29;c++)void 0!==a[c]&&m(e,c,a[c])}else f(e)}(e,t,n,r,a)},light:function(e,t,n,r){},reporter:function(e,t,n,r,a,c){},sensor:function(e,t,n,r,a){!function(e,t,n,r,a){console.log("__sensorState",e,t,n,r,a),y("sensor",{name:e,inverted:r,state:a})}(e,t,n,r,a)},signalHead:function(e,t,n,r,a,c,o,i){},signalMast:function(e,t,n,r,a,c){},memory:function(e,t,n,r){},power:function(e){!function(e){console.log("__layoutPowerState",e,v),y("power",e)}(e)}}),!s)throw new Error("private~Could not open JMRI WebSocket.");return o=!0,k("ready")},throttle:h,requestLoco:O,releaseLoco:x,watchSensors:function(e){e.forEach((function(e){return s.getJMRI("sensor","DS".concat(e.pin))}))},changeDirection:function(e,t){return w()&&s.setJMRI("throttle",e,{address:e,forward:!!t}),k("direction","New direction action dispatched.")},power:g,on:function(e,t,n){v[e]||(v[e]={}),v[e][t]=n},off:function(e,t){v[e]&&v[e][t]&&delete v[e][t]},getState:function(){return{setup:o,ready:i}}};t.a=E},42:function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));n(0);var r=n(102),a=n.n(r),c=n(77),o=n.n(c),i=n(78),s=n.n(i),l=n(106),u=n.n(l),d=n(107),j=n.n(d),f=n(39),b=n.n(f),p=n(1),m={map:{link:"/map",label:"Layout",icon:Object(p.jsx)(o.a,{})},conductor:{link:"/",label:"Conductor",icon:Object(p.jsx)(b.a,{})},turnouts:{link:"/turnouts",label:"Turnouts",icon:Object(p.jsx)(a.a,{})},throttles:{link:"/throttles",label:"Throttle",icon:Object(p.jsx)(s.a,{})},signals:{link:"/signals",label:"Signals",icon:Object(p.jsx)(u.a,{})},effects:{link:"/effects",label:"Effects",icon:Object(p.jsx)(j.a,{})}},h=function(e){return Object.keys(m).reduce((function(t,n){return m[n].link===e&&(t=m[n]),t}),null)};t.a=m}},[[232,1,2]]]);
//# sourceMappingURL=main.e8bfac98.chunk.js.map